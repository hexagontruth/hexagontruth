(()=>{var n={550:(n,e,t)=>{"use strict";t.d(e,{A:()=>z});var r=t(601),o=t.n(r),a=t(314),c=t.n(a),i=t(417),s=t.n(i),l=new URL(t(149),t.b),v=new URL(t(631),t.b),u=new URL(t(892),t.b),f=new URL(t(935),t.b),p=new URL(t(608),t.b),m=new URL(t(236),t.b),h=c()(o()),d=s()(l),x=s()(v),b=s()(u),g=s()(f),y=s()(p),w=s()(m);h.push([n.id,'@font-face{font-family:"montserrat";src:url('+d+') format("woff2");font-weight:normal;font-style:normal}@font-face{font-family:"roboto-mono";src:url('+x+') format("woff2");font-weight:400;font-style:normal}@font-face{font-family:"roboto-mono";src:url('+b+') format("woff2");font-weight:700;font-style:normal}@font-face{font-family:"roboto-mono";src:url('+g+') format("woff2");font-weight:300;font-style:normal}@font-face{font-family:"roboto-mono";src:url('+y+') format("woff2");font-weight:200;font-style:normal}@font-face{font-family:"icon";src:url('+w+') format("woff2");font-weight:normal;font-style:normal}[class^=icon-]::before,[class*=" icon-"]::before{font-family:"icon";font-style:normal;font-weight:normal;speak:none;display:inline-block;text-decoration:inherit;width:1em;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-smaller::before{transform:scale(0.9)}.icon-bluesky:before{content:""}.icon-mastodon:before{content:""}.icon-youtube:before{content:""}.icon-voxels:before{content:""}.icon-vimeo:before{content:""}.icon-twitter:before{content:""}.icon-twitch:before{content:""}.icon-tumblr:before{content:""}.icon-tshirt:before{content:""}.icon-superrare:before{content:""}.icon-soundcloud:before{content:""}.icon-reddit:before{content:""}.icon-rarible:before{content:""}.icon-podcast:before{content:""}.icon-patreon:before{content:""}.icon-opensea:before{content:""}.icon-minhalma:before{content:""}.icon-menu-right:before{content:""}.icon-menu-left:before{content:""}.icon-mail-hex:before{content:""}.icon-linkedin:before{content:""}.icon-instagram:before{content:""}.icon-hexular:before{content:""}.icon-hexnet:before{content:""}.icon-hexagon:before{content:""}.icon-github:before{content:""}.icon-facebook:before{content:""}.icon-external-link:before{content:""}.icon-ethereum:before{content:""}.icon-email:before{content:""}.icon-discord:before{content:""}.icon-bandcamp:before{content:""}.icon-3-box:before{content:""}.icon-thingiverse:before{content:""}.icon-hexstar:before{content:""}.icon-substack:before{content:""}*{box-sizing:border-box;border:0;padding:0;margin:0;transition:opacity 250ms}*:focus{outline:none}:root{color-scheme:only light}html{width:100%;height:100%;position:relative;font-family:"Montserrat","Helvetica Neue","Helvetica",Arial,"FreeSans","DejaVu Sans",sans-serif;font-size:24px;scroll-snap-type:y mandatory;overscroll-behavior:none;scroll-behavior:smooth;scroll-margin:0;scroll-padding:0;scroll-padding-block:0}html.fullscreen{overflow:hidden}@media screen and (min-aspect-ratio: 3/4){html{font-size:2.5vh}}@media screen and (max-aspect-ratio: 3/4){html{font-size:3.3333333333vw}}body{position:relative;background:#fff;color:#1f1f1f}@media(prefers-color-scheme: dark){body{background:#3f3f3f;color:#fff}}a,a::before,button{border:0;color:inherit;text-decoration:none;transition:all 250ms}a:active,a:hover{color:#fb3}@media(hover: hover){a:active,a:hover{color:#fb3}}button{background:rgba(0,0,0,0);cursor:pointer}ul,ol{list-style-type:none}.wrapper{width:100%;max-width:40rem}.pad-1{padding:1rem}.pad-2{padding:2rem}.pad-3{padding:3rem}.pad-4{padding:4rem}.flex{display:flex;flex-direction:column;justify-content:space-between;align-items:center;margin:auto auto}.flex.flex-row{flex-direction:row !important}.flex.align-stretch{align-items:stretch !important}.flex .justify-start{justify-content:flex-start !important}.flex .justify-end{justify-content:flex-end !important}.flex .justify-center{justify-content:center !important}.controls{position:fixed;left:.2rem;top:.2rem;z-index:200;color:#fff}.controls .counter{font-family:roboto-mono,"Lucida Console","Lucida Sans Typewriter",Monaco,"Noto Mono",monospace;font-size:.6rem;line-height:1}.nav-block{position:fixed;display:flex;flex-direction:row;justify-content:center;align-items:stretch;z-index:100;left:0;right:0;width:100%;background-color:#000;color:#fff;transition:all 250ms}.nav-block.header{top:0;height:1rem}.nav-block.header.hidden{transform:translateY(-100%)}.nav-block.footer{bottom:0;height:2rem}.nav-block.footer.hidden{transform:translateY(100%)}.nav-block .nav{display:flex;flex-direction:row;justify-content:center;align-items:stretch}.nav-block .nav.scroll-tabs .scroll-tab{display:flex;flex-direction:column;justify-content:center;align-items:center;width:3em;background:rgba(0,0,0,0);cursor:pointer}.nav-block .nav.scroll-tabs .scroll-tab .scroll-tab-inner{background:#888;margin:0 .5em;width:2em;height:max(1px,.0833333333em);font-size:1em;border-radius:1em;transition:background 250ms}.nav-block .nav.scroll-tabs .scroll-tab.active .scroll-tab-inner{background:#fff !important}@media(hover: hover){.nav-block .nav.scroll-tabs .scroll-tab:hover .scroll-tab-inner{background:#fb3}}.nav-block .nav.nav-footer{flex:1 0 100%}.nav-block .nav.nav-footer ul.nav-links{display:flex;flex-direction:row;justify-content:space-evenly;align-items:center;flex-wrap:wrap}.nav-block .nav.nav-footer ul.nav-links li{flex:0 1 auto;margin:0}.nav-block .nav.nav-footer ul.nav-links li a:hover::before{transform:scale(1.25)}.background{z-index:-1;position:fixed;top:0;left:0;width:100%;height:100%;object-fit:cover;overflow:hidden}canvas{display:block}.scroll-block{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:calc(var(--vh, 1vh)*100);scroll-snap-stop:always;scroll-snap-align:start}.block{position:relative;width:100%;flex:1 1 content}.block.block-title{background:#000;color:#fff;display:flex;flex-direction:column;justify-content:center;align-items:center}.block.block-title .title-spacer{flex:0 1 100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.block.block-title .title-spacer.title-text{display:flex;flex-direction:row;justify-content:center;align-items:center;flex:0 2 content;margin:3rem 0}.block.block-title .title-spacer.title-text h1{position:relative;display:flex;flex-direction:row;justify-content:center;align-items:center;user-select:none;font-size:inherit;font-weight:200;font-size:2rem;font-family:roboto-mono,"Lucida Console","Lucida Sans Typewriter",Monaco,"Noto Mono",monospace;text-transform:uppercase;letter-spacing:0}.block.block-title .title-spacer.title-text h1 span{width:1em;transition:all 250ms}.block.block-title .title-spacer.title-text h1 span.hidden{transform:rotateY(90deg)}.block.block-title .title-spacer.title-text h1::after{position:absolute;right:-1em;width:1em;top:0;content:"_";animation-name:blink;animation-duration:1s;animation-iteration-count:infinite}.block.block-title .title-spacer.title-text h1.t0::after{transform:translateX(-12em)}.block.block-title .title-spacer.title-text h1.t1::after{transform:translateX(-11em)}.block.block-title .title-spacer.title-text h1.t2::after{transform:translateX(-10em)}.block.block-title .title-spacer.title-text h1.t3::after{transform:translateX(-9em)}.block.block-title .title-spacer.title-text h1.t4::after{transform:translateX(-8em)}.block.block-title .title-spacer.title-text h1.t5::after{transform:translateX(-7em)}.block.block-title .title-spacer.title-text h1.t6::after{transform:translateX(-6em)}.block.block-title .title-spacer.title-text h1.t7::after{transform:translateX(-5em)}.block.block-title .title-spacer.title-text h1.t8::after{transform:translateX(-4em)}.block.block-title .title-spacer.title-text h1.t9::after{transform:translateX(-3em)}.block.block-title .title-spacer.title-text h1.t10::after{transform:translateX(-2em)}.block.block-title .title-spacer.title-text h1.t11::after{transform:translateX(-1em)}.block.block-title .title-logo{position:relative;width:6rem;flex:0 0 6rem}.block.block-title ul.title-links{display:flex;flex-direction:row;justify-content:center;align-items:stretch;gap:2rem;line-height:1;font-size:.8333333333rem}.block.block-title ul.title-links li{flex:0 1 auto;margin:0;padding:0;text-align:center}.block.window{background:rgba(0,0,0,0);display:flex;flex-direction:column;justify-content:center;align-items:center;flex:1 1 100%;overflow:hidden}.block.block-control{padding:.5rem 4rem;background:#000;color:#fff;line-height:2rem;gap:1rem}.block.block-control a{text-align:center;flex:1 0 50%;padding:0 1rem}.block.block-control button{flex:0 1;font-size:1.5rem}.block.block-control button span{display:block;transform:rotate(90deg)}.block.block-control button:hover{color:#fb3}.content{display:flex;flex-direction:column;justify-content:space-between;align-items:center;background:#fff;padding:2rem 3rem}@media(prefers-color-scheme: dark){.content{background:#3f3f3f}}.content.content-bottom{padding-bottom:3rem}.content.content-box{padding-bottom:1rem}.content.content-translucent{background:rgba(255,255,255,.4980392157)}@media(prefers-color-scheme: dark){.content.content-translucent{background:rgba(0,0,0,.4980392157)}}.content p,.content ul,.content ol{font-size:.8333333333rem;line-height:2rem;margin:0 0 1rem 0;padding:0;hyphens:auto}.content p a,.content ul a,.content ol a{border-bottom:1px dotted #9f9f9f}.content ul.big-icons{display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}.content ul.big-icons li{display:block;text-align:center;transition:all 250ms}@media(prefers-color-scheme: dark){.content ul.big-icons li{background:#3f3f3f}}.content ul.big-icons li:hover{transform:scale(1.25)}.content ul.big-icons li a{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:auto;border:none}.content ul.big-icons li a i{display:block;font-size:2rem}.content ul.big-icons li a span{display:block}.content ul.big-hex{display:flex;flex-direction:row;justify-content:center;align-items:center;flex-wrap:wrap;gap:1.732rem 2rem;margin:0;padding:.866025rem 0}.content ul.big-hex li{display:block;margin:-0.866025rem 0;width:6rem;aspect-ratio:.866/1;clip-path:polygon(-50% 50%, 50% 100%, 50% 125%, 50% 100%, 150% 50%, 50% 0%, 50% -25%, 50% 0%);overflow:hidden;backface-visibility:hidden;background:#dfdfdf;text-align:center;transition:all 250ms}@media(prefers-color-scheme: dark){.content ul.big-hex li{background:#3f3f3f}}.content ul.big-hex li:hover{transform:scale(1.25)}.content ul.big-hex li a{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;margin:auto;border:none}.content ul.big-hex li a i{display:block;font-size:2rem}.content ul.big-hex li a span{display:block;height:1em;line-height:1}.hidden{opacity:0;user-select:none}.hidden,.hidden *{pointer-events:none}.no-pointer{pointer-events:none}.abs-full{position:absolute;width:100%;height:100%;top:0;left:0}sup{vertical-align:top}.larger{font-size:1.33333em}.smaller{font-size:.75em}.mono{font-family:roboto-mono,"Lucida Console","Lucida Sans Typewriter",Monaco,"Noto Mono",monospace}.light{font-weight:300}.thin{font-weight:200}@keyframes blink{0%{opacity:1}20%{opacity:1}25%{opacity:0}70%{opacity:0}75%{opacity:1}}button.button-touch{position:absolute;top:0;height:100%;width:25%}button.button-touch.touch-left{left:0}button.button-touch.touch-right{right:0}.video-outer .video-inner{display:block;position:relative;width:100%;height:100%;background-color:#000;transition:opacity 1s}.video-outer .video-inner video{position:absolute;left:0;top:0;width:100%;height:100%;display:block;object-fit:cover;cursor:pointer;opacity:0;transition:opacity 1s}.video-outer .video-inner video.active{opacity:1}.contain-w{display:flex;flex-direction:column;justify-content:center;align-items:center;flex:0 1 100%;margin:auto;min-width:0;min-height:0;max-width:100%;aspect-ratio:1/1}.contain-h{display:flex;flex-direction:row;justify-content:center;align-items:center;flex:0 1 100%;margin:auto;min-width:0;min-height:0;max-width:100%;aspect-ratio:1/1}svg{fill:#fff}p{text-align:justify}.spacer{height:1rem}.text-center,.text-center p{text-align:center}p .part{display:inline-block}.lowercase{text-transform:lowercase}.q{color:#aaa;font-family:serif;line-height:0;font-size:2rem}.columns{column-count:3;column-gap:2em}.nowrap{white-space:nowrap}',""]);const z=h},314:n=>{"use strict";n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",r=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),r&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),r&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,r,o,a){"string"==typeof n&&(n=[[null,n,void 0]]);var c={};if(r)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(c[s]=!0)}for(var l=0;l<n.length;l++){var v=[].concat(n[l]);r&&c[v[0]]||(void 0!==a&&(void 0===v[5]||(v[1]="@layer".concat(v[5].length>0?" ".concat(v[5]):""," {").concat(v[1],"}")),v[5]=a),t&&(v[2]?(v[1]="@media ".concat(v[2]," {").concat(v[1],"}"),v[2]=t):v[2]=t),o&&(v[4]?(v[1]="@supports (".concat(v[4],") {").concat(v[1],"}"),v[4]=o):v[4]="".concat(o)),e.push(v))}},e}},417:n=>{"use strict";n.exports=function(n,e){return e||(e={}),n?(n=String(n.__esModule?n.default:n),/^['"].*['"]$/.test(n)&&(n=n.slice(1,-1)),e.hash&&(n+=e.hash),/["'() \t\n]|(%20)/.test(n)||e.needQuotes?'"'.concat(n.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):n):n}},601:n=>{"use strict";n.exports=function(n){return n[1]}},376:n=>{n.exports="#version 300 es\nprecision highp float;\nout vec4 fragColor;\nuniform vec2 size;\nuniform sampler2D inputTexture;\nvoid main(){\nvec2 uv=gl_FragCoord.xy/size;\nvec4 s,n;\nvec2 offsets[4]=vec2[4](vec2(1,1),vec2(-1,1),vec2(-1,-1),vec2(1,-1));\ns=texture(inputTexture,uv);\nfor(int i=0; i<4; i++){\nvec2 v;\nv=offsets[i];\nv=v/size;\nn+=texture(inputTexture,uv+v);\n}\ns=mix(s,n/4.,0.5);\nfragColor=s;\n}"},909:n=>{n.exports="#version 300 es\nprecision highp float;\nout vec4 fragColor;\nin vec4 vColor;\nuniform float counter;\nuniform float duration;\nuniform float time;\nuniform float skipInterval;\nuniform float skipTime;\nuniform bool skip;\nuniform vec2 size;\nuniform vec2 cover;\nuniform vec2 contain;\nuniform vec2 lastSize;\nuniform vec2 parallax;\nuniform vec2 dir;\nuniform float zoom;\nuniform float resizeAt;\nuniform bool resize;\nuniform float cursorDownAt;\nuniform float cursorUpAt;\nuniform vec3 cursorHex;\nuniform vec3 cursorHexRounded;\nuniform vec2 cursorPos;\nuniform vec2 cursorLastPos;\nuniform vec2 cursorDownPos;\nuniform vec2 cursorUpPos;\nuniform bool cursorDown;\nuniform float cursorAngle;\nuniform bool shiftKey;\nuniform sampler2D inputTexture;\nuniform sampler2D lastTexture;\nvec3 unit=vec3(1,0,-1);\n#define pi 3.141592653589793\n#define tau 6.283185307179586\n#define sr2 1.4142135623730951\n#define sr3 1.7320508075688772\n#define ir3 0.5773502691896257\nmat3x2 hex2cart=mat3x2(vec2(0,0),vec2(1,0),vec2(0.5,sr3/2.));\nmat2x3 cart2hex=mat2x3(vec3(-1,1,0),vec3(-1./sr3,-1./sr3,2./sr3));\nmat3 hex2hex=mat3(1./3.,1./3.-ir3,1./3.+ir3,1./3.+ir3,1./3.,1./3.-ir3,1./3.-ir3,1./3.+ir3,1./3.);\nvec3 htWhite=1.-vec3(1./36.,1./24.,1./12.);\nbool isNan(float n){\nreturn!(n<=0.||0.<=n);\n}\nfloat amax(vec4 v){\nreturn max(max(max(abs(v.x),abs(v.y)),abs(v.z)),abs(v.w));\n}\nfloat amax(vec3 v){\nreturn max(max(abs(v.x),abs(v.y)),abs(v.z));\n}\nfloat amax(vec2 v){\nreturn max(abs(v.x),abs(v.y));\n}\nfloat amin(vec3 v){\nv=abs(v);\nreturn min(min(v.x,v.y),v.z);\n}\nfloat amin(vec2 v){\nv=abs(v);\nreturn min(v.x,v.y);\n}\nfloat osc(float n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nvec2 osc(vec2 n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nvec3 osc(vec3 n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nfloat tsin(float n){\nreturn sin(n*tau);\n}\nfloat tcos(float n){\nreturn cos(n*tau);\n}\nvec2 tsin(vec2 n){\nreturn sin(n*tau);\n}\nvec2 tcos(vec2 n){\nreturn cos(n*tau);\n}\nvec3 tsin(vec3 n){\nreturn sin(n*tau);\n}\nvec3 tcos(vec3 n){\nreturn cos(n*tau);\n}\nfloat sum(vec2 p){\nreturn p.x+p.y;\n}\nfloat sum(vec3 p){\nreturn p.x+p.y+p.z;\n}\nfloat prod(vec2 p){\nreturn p.x*p.y;\n}\nfloat prod(vec3 p){\nreturn p.x*p.y*p.z;\n}\nfloat xsum(float s,float q){\nreturn s+q-2.*s*q;\n}\nvec2 xsum(vec2 s,vec2 q){\nreturn s+q-2.*s*q;\n}\nvec3 xsum(vec3 s,vec3 q){\nreturn s+q-2.*s*q;\n}\nvec2 rot(vec2 p,float a){\nfloat ca=cos(a);\nfloat sa=sin(a);\nreturn mat2(ca,sa,-sa,ca)*p;\n}\nvec3 rot(vec3 p,vec3 u,float a){\nfloat cosa=cos(a);\nfloat cosa1=1.-cosa;\nfloat sina=sin(a);\nmat3 m=mat3(cosa+u.x*u.x*cosa1,u.x*u.y*cosa1+u.z*sina,u.z*u.x*cosa1-u.y*sina,u.x*u.y*cosa1-u.z*sina,cosa+u.y*u.y*cosa1,u.z*u.y*cosa1+u.x*sina,u.x*u.z*cosa1+u.y*sina,u.y*u.z*cosa1-u.x*sina,cosa+u.z*u.z*cosa1);\nreturn m*p;\n}\nvec2 trot(vec2 p,float a){\nreturn rot(p,a*tau);\n}\nvec3 trot(vec3 p,vec3 u,float a){\nreturn rot(p,u,a*tau);\n}\nvec2 project(vec2 a,vec2 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec3 project(vec3 a,vec3 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec4 project(vec4 a,vec4 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec3 hexProject(vec3 p){\nvec3 n=project(p,unit.xxx);\nreturn p-n;\n}\nfloat tatan(vec2 v){\nfloat a=atan(v.y,v.x);\na+=pi;\na/=tau;\na=fract(a-0.25);\na=1.-a;\nreturn a;\n}\nvec4 dreflect(vec4 cv,vec4 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec3 dreflect(vec3 cv,vec3 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 dreflect(vec2 cv,vec2 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 dreflect(vec2 cv,float a){\nvec2 n=vec2(cos(a),sin(a));\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 treflect(vec2 cv,float a){\nreturn dreflect(cv,a*tau);\n}\nfloat qw(float n,float q,float w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nvec2 qw(vec2 n,float q,float w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nvec2 qw(vec2 n,float q,vec2 w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nfloat qs(float n,float q){\nreturn smoothstep(-q/2.,q/2.,n);\n}\nfloat qwp(float n,float q,float w){\nreturn qw(abs(fract(n+0.5)-0.5),q,w);\n}\nfloat openStep(float m,float n){\nreturn 1.-step(m,-n);\n}\nvec2 openStep(float m,vec2 n){\nreturn 1.-step(m,-n);\n}\nvec3 openStep(float m,vec3 n){\nreturn 1.-step(m,-n);\n}\nvec4 openStep(float m,vec4 n){\nreturn 1.-step(m,-n);\n}\nfloat linearStep(float a,float b,float n){\nreturn clamp((n-a)/(b-a),0.,1.);\n}\nfloat slength(vec2 u,vec2 v,vec2 p){\nvec2 w,x,z;\nw=u-v;\nx=p-v;\nz=project(x,w);\nz=clamp(z,min(w,unit.yy),max(w,unit.yy));\nreturn length(z-x);\n}\nvec3 roundCubic(vec3 p){\nvec3 r=round(p);\nvec3 d=abs(r-p);\nif(d.x>d.y&&d.x>d.z)r.x=-r.y-r.z;\nelse if(d.y>d.z)r.y=-r.x-r.z;\nelse\nr.z=-r.x-r.y;\nreturn r;\n}\nvec3 hex2grid(vec3 hex){\nvec3 p;\nhex=hex2hex*(hex/sr3);\np=roundCubic(hex);\np=hex-p;\np=-(hex2hex*(p*sr3));\nreturn p;\n}\nvec3 roundGrid(vec3 hex,float gridSize){\nvec3 p=hex2grid(hex);\np*=gridSize;\np=roundCubic(p);\nreturn p;\n}\nvec3 interpolatedCubic(vec3 p,out vec3 v[3]){\nvec3 q,d,r,fl,cl,alt;\nint i0,i1,i2;\nfl=floor(p);\ncl=ceil(p);\nr=round(p);\nd=abs(r-p);\nfor(int i=0; i<3; i++)alt[i]=r[i]==fl[i]?cl[i]:fl[i];\nif(d.x>d.y&&d.x>d.z)i0=0;\nelse if(d.y>d.z)i0=1;\nelse\ni0=2;\ni1=(i0+1)% 3;\ni2=(i0+2)% 3;\nr[i0]=-r[i1]-r[i2];\nv[0]=v[1]=v[2]=r;\nv[1][i1]=alt[i1];\nv[1][i0]=-v[1][i1]-v[1][i2];\nv[2][i2]=alt[i2];\nv[2][i0]=-v[2][i1]-v[2][i2];\nfor(int i=0; i<3; i++)q[i]=1.-amax(v[i]-p);\nq=q/sum(q);\nif(q.y<q.z){\nq.yz=q.zy;\nvec3 temp=v[1];\nv[1]=v[2];\nv[2]=temp;\n}\nreturn q;\n}\nvec4 hexbin(vec2 cv,float s){\nfloat res=s/3.;\nvec2 base,dv;\nbase=cv;\ncv*=res;\nvec2 r=vec2(1.,1./sr3);\nr=vec2(r.y,r.x);\nvec2 h=r*0.5;\nvec2 a=mod(cv,r)-h;\nvec2 b=mod(cv-h,r)-h;\nfloat delta=length(a)-length(b);\ndv=delta<0.?a:b;\na=mod(base,r)-h;\nb=mod(base-h,r)-h;\nvec2 coord=length(a)<length(b)?a:b;\ncoord=(cv-dv)/res;\ndv*=3.;\nreturn vec4(dv,coord);\n}\nfloat quantize(float f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nvec2 quantize(vec2 f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nvec3 quantize(vec3 f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nfloat quantize(float f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec2 quantize(vec2 f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec3 quantize(vec3 f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec2 scaleUv(vec2 uv,float n){\nreturn((uv*2.-1.)*n)*0.5+0.5;\n}\nvec4 rgb2hsv(vec4 c){\nc=clamp(c,0.,1.);\nvec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);\nvec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));\nvec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));\nfloat d=q.x-min(q.w,q.y);\nfloat e=1.0e-10;\nreturn vec4(abs(q.z+(q.w-q.y)/(6.0*d+e)),d/(q.x+e),q.x,c.w);\n}\nvec4 hsv2rgb(vec4 c){\nc.yzw=clamp(c.yzw,0.,1.);\nvec4 K=vec4(1.,2./3.,1./3.,3.);\nvec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);\nreturn vec4(c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y),c.w);\n}\nvec3 rgb2hsv(vec3 c){\nreturn rgb2hsv(vec4(c,1)).xyz;\n}\nvec3 hsv2rgb(vec3 c){\nreturn hsv2rgb(vec4(c,1)).xyz;\n}\nvec4 alphamul(vec4 a,vec4 b){\nreturn vec4(b.a*b.rgb+a.a*a.rgb*(1.-b.a),b.a+a.a*(1.-b.a));\n}\nvec3 alphamul(vec3 a,vec3 b,float alpha){\nreturn alphamul(vec4(a,1),vec4(b,alpha)).rgb;\n}\nuniform float gridSize;\nuniform vec2 pan;\nvec3 uv2cell(vec2 uv,vec2 txSize){\nuv=uv*2.-1.;\nuv+=0.5/txSize;\nfloat s=txSize.x/2.;\nfloat g=gridSize;\nvec3 hex,pix,cel;\nhex=vec3(uv,-uv.x-uv.y);\nhex=hex*s/g;\ncel=roundGrid(hex,g);\nreturn cel;\n}\nvec3 uv2cell(vec2 uv){\nreturn uv2cell(uv,size);\n}\nvec2 cell2uv(vec3 hex,vec2 txSize){\nvec2 uv=hex.xy;\nuv=uv/txSize+0.5;\nuv-=0.5/txSize;\nreturn uv;\n}\nvec2 cell2uv(vec3 hex){\nreturn cell2uv(hex,size);\n}\nuniform sampler2D noiseTexture;\nvec4 getNbr(vec3 hex){\nvec2 uv=cell2uv(hex);\nreturn texture(lastTexture,uv);\n}\nvec4 rule(vec3 hex){\nvec4 cur,next;\ncur=getNbr(hex);\nnext=cur-(1./8./skipInterval);\nreturn next;\n}\nvoid main(){\nvec4 c;\nvec2 uv=gl_FragCoord.xy/size;\nvec2 cv=uv*2.-1.;\nvec3 hex=uv2cell(uv);\nc=rule(hex);\nc*=openStep(0.,counter);\nfloat cursor=float(cursorDown)*max(0.,1.-amax(cursorHexRounded-hex));\nc.rg+=cursor*mix(unit.xy,unit.yx,float(shiftKey));\nfragColor=vec4(c);\n}"},305:n=>{n.exports="#version 300 es\nprecision highp float;\nout vec4 fragColor;\nin vec4 vColor;\nuniform float counter;\nuniform float duration;\nuniform float time;\nuniform float skipInterval;\nuniform float skipTime;\nuniform bool skip;\nuniform vec2 size;\nuniform vec2 cover;\nuniform vec2 contain;\nuniform vec2 lastSize;\nuniform vec2 parallax;\nuniform vec2 dir;\nuniform float zoom;\nuniform float resizeAt;\nuniform bool resize;\nuniform float cursorDownAt;\nuniform float cursorUpAt;\nuniform vec3 cursorHex;\nuniform vec3 cursorHexRounded;\nuniform vec2 cursorPos;\nuniform vec2 cursorLastPos;\nuniform vec2 cursorDownPos;\nuniform vec2 cursorUpPos;\nuniform bool cursorDown;\nuniform float cursorAngle;\nuniform bool shiftKey;\nuniform sampler2D inputTexture;\nuniform sampler2D lastTexture;\nvec3 unit=vec3(1,0,-1);\n#define pi 3.141592653589793\n#define tau 6.283185307179586\n#define sr2 1.4142135623730951\n#define sr3 1.7320508075688772\n#define ir3 0.5773502691896257\nmat3x2 hex2cart=mat3x2(vec2(0,0),vec2(1,0),vec2(0.5,sr3/2.));\nmat2x3 cart2hex=mat2x3(vec3(-1,1,0),vec3(-1./sr3,-1./sr3,2./sr3));\nmat3 hex2hex=mat3(1./3.,1./3.-ir3,1./3.+ir3,1./3.+ir3,1./3.,1./3.-ir3,1./3.-ir3,1./3.+ir3,1./3.);\nvec3 htWhite=1.-vec3(1./36.,1./24.,1./12.);\nbool isNan(float n){\nreturn!(n<=0.||0.<=n);\n}\nfloat amax(vec4 v){\nreturn max(max(max(abs(v.x),abs(v.y)),abs(v.z)),abs(v.w));\n}\nfloat amax(vec3 v){\nreturn max(max(abs(v.x),abs(v.y)),abs(v.z));\n}\nfloat amax(vec2 v){\nreturn max(abs(v.x),abs(v.y));\n}\nfloat amin(vec3 v){\nv=abs(v);\nreturn min(min(v.x,v.y),v.z);\n}\nfloat amin(vec2 v){\nv=abs(v);\nreturn min(v.x,v.y);\n}\nfloat osc(float n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nvec2 osc(vec2 n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nvec3 osc(vec3 n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nfloat tsin(float n){\nreturn sin(n*tau);\n}\nfloat tcos(float n){\nreturn cos(n*tau);\n}\nvec2 tsin(vec2 n){\nreturn sin(n*tau);\n}\nvec2 tcos(vec2 n){\nreturn cos(n*tau);\n}\nvec3 tsin(vec3 n){\nreturn sin(n*tau);\n}\nvec3 tcos(vec3 n){\nreturn cos(n*tau);\n}\nfloat sum(vec2 p){\nreturn p.x+p.y;\n}\nfloat sum(vec3 p){\nreturn p.x+p.y+p.z;\n}\nfloat prod(vec2 p){\nreturn p.x*p.y;\n}\nfloat prod(vec3 p){\nreturn p.x*p.y*p.z;\n}\nfloat xsum(float s,float q){\nreturn s+q-2.*s*q;\n}\nvec2 xsum(vec2 s,vec2 q){\nreturn s+q-2.*s*q;\n}\nvec3 xsum(vec3 s,vec3 q){\nreturn s+q-2.*s*q;\n}\nvec2 rot(vec2 p,float a){\nfloat ca=cos(a);\nfloat sa=sin(a);\nreturn mat2(ca,sa,-sa,ca)*p;\n}\nvec3 rot(vec3 p,vec3 u,float a){\nfloat cosa=cos(a);\nfloat cosa1=1.-cosa;\nfloat sina=sin(a);\nmat3 m=mat3(cosa+u.x*u.x*cosa1,u.x*u.y*cosa1+u.z*sina,u.z*u.x*cosa1-u.y*sina,u.x*u.y*cosa1-u.z*sina,cosa+u.y*u.y*cosa1,u.z*u.y*cosa1+u.x*sina,u.x*u.z*cosa1+u.y*sina,u.y*u.z*cosa1-u.x*sina,cosa+u.z*u.z*cosa1);\nreturn m*p;\n}\nvec2 trot(vec2 p,float a){\nreturn rot(p,a*tau);\n}\nvec3 trot(vec3 p,vec3 u,float a){\nreturn rot(p,u,a*tau);\n}\nvec2 project(vec2 a,vec2 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec3 project(vec3 a,vec3 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec4 project(vec4 a,vec4 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec3 hexProject(vec3 p){\nvec3 n=project(p,unit.xxx);\nreturn p-n;\n}\nfloat tatan(vec2 v){\nfloat a=atan(v.y,v.x);\na+=pi;\na/=tau;\na=fract(a-0.25);\na=1.-a;\nreturn a;\n}\nvec4 dreflect(vec4 cv,vec4 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec3 dreflect(vec3 cv,vec3 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 dreflect(vec2 cv,vec2 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 dreflect(vec2 cv,float a){\nvec2 n=vec2(cos(a),sin(a));\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 treflect(vec2 cv,float a){\nreturn dreflect(cv,a*tau);\n}\nfloat qw(float n,float q,float w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nvec2 qw(vec2 n,float q,float w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nvec2 qw(vec2 n,float q,vec2 w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nfloat qs(float n,float q){\nreturn smoothstep(-q/2.,q/2.,n);\n}\nfloat qwp(float n,float q,float w){\nreturn qw(abs(fract(n+0.5)-0.5),q,w);\n}\nfloat openStep(float m,float n){\nreturn 1.-step(m,-n);\n}\nvec2 openStep(float m,vec2 n){\nreturn 1.-step(m,-n);\n}\nvec3 openStep(float m,vec3 n){\nreturn 1.-step(m,-n);\n}\nvec4 openStep(float m,vec4 n){\nreturn 1.-step(m,-n);\n}\nfloat linearStep(float a,float b,float n){\nreturn clamp((n-a)/(b-a),0.,1.);\n}\nfloat slength(vec2 u,vec2 v,vec2 p){\nvec2 w,x,z;\nw=u-v;\nx=p-v;\nz=project(x,w);\nz=clamp(z,min(w,unit.yy),max(w,unit.yy));\nreturn length(z-x);\n}\nvec3 roundCubic(vec3 p){\nvec3 r=round(p);\nvec3 d=abs(r-p);\nif(d.x>d.y&&d.x>d.z)r.x=-r.y-r.z;\nelse if(d.y>d.z)r.y=-r.x-r.z;\nelse\nr.z=-r.x-r.y;\nreturn r;\n}\nvec3 hex2grid(vec3 hex){\nvec3 p;\nhex=hex2hex*(hex/sr3);\np=roundCubic(hex);\np=hex-p;\np=-(hex2hex*(p*sr3));\nreturn p;\n}\nvec3 roundGrid(vec3 hex,float gridSize){\nvec3 p=hex2grid(hex);\np*=gridSize;\np=roundCubic(p);\nreturn p;\n}\nvec3 interpolatedCubic(vec3 p,out vec3 v[3]){\nvec3 q,d,r,fl,cl,alt;\nint i0,i1,i2;\nfl=floor(p);\ncl=ceil(p);\nr=round(p);\nd=abs(r-p);\nfor(int i=0; i<3; i++)alt[i]=r[i]==fl[i]?cl[i]:fl[i];\nif(d.x>d.y&&d.x>d.z)i0=0;\nelse if(d.y>d.z)i0=1;\nelse\ni0=2;\ni1=(i0+1)% 3;\ni2=(i0+2)% 3;\nr[i0]=-r[i1]-r[i2];\nv[0]=v[1]=v[2]=r;\nv[1][i1]=alt[i1];\nv[1][i0]=-v[1][i1]-v[1][i2];\nv[2][i2]=alt[i2];\nv[2][i0]=-v[2][i1]-v[2][i2];\nfor(int i=0; i<3; i++)q[i]=1.-amax(v[i]-p);\nq=q/sum(q);\nif(q.y<q.z){\nq.yz=q.zy;\nvec3 temp=v[1];\nv[1]=v[2];\nv[2]=temp;\n}\nreturn q;\n}\nvec4 hexbin(vec2 cv,float s){\nfloat res=s/3.;\nvec2 base,dv;\nbase=cv;\ncv*=res;\nvec2 r=vec2(1.,1./sr3);\nr=vec2(r.y,r.x);\nvec2 h=r*0.5;\nvec2 a=mod(cv,r)-h;\nvec2 b=mod(cv-h,r)-h;\nfloat delta=length(a)-length(b);\ndv=delta<0.?a:b;\na=mod(base,r)-h;\nb=mod(base-h,r)-h;\nvec2 coord=length(a)<length(b)?a:b;\ncoord=(cv-dv)/res;\ndv*=3.;\nreturn vec4(dv,coord);\n}\nfloat quantize(float f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nvec2 quantize(vec2 f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nvec3 quantize(vec3 f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nfloat quantize(float f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec2 quantize(vec2 f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec3 quantize(vec3 f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec2 scaleUv(vec2 uv,float n){\nreturn((uv*2.-1.)*n)*0.5+0.5;\n}\nvec4 rgb2hsv(vec4 c){\nc=clamp(c,0.,1.);\nvec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);\nvec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));\nvec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));\nfloat d=q.x-min(q.w,q.y);\nfloat e=1.0e-10;\nreturn vec4(abs(q.z+(q.w-q.y)/(6.0*d+e)),d/(q.x+e),q.x,c.w);\n}\nvec4 hsv2rgb(vec4 c){\nc.yzw=clamp(c.yzw,0.,1.);\nvec4 K=vec4(1.,2./3.,1./3.,3.);\nvec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);\nreturn vec4(c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y),c.w);\n}\nvec3 rgb2hsv(vec3 c){\nreturn rgb2hsv(vec4(c,1)).xyz;\n}\nvec3 hsv2rgb(vec3 c){\nreturn hsv2rgb(vec4(c,1)).xyz;\n}\nvec4 alphamul(vec4 a,vec4 b){\nreturn vec4(b.a*b.rgb+a.a*a.rgb*(1.-b.a),b.a+a.a*(1.-b.a));\n}\nvec3 alphamul(vec3 a,vec3 b,float alpha){\nreturn alphamul(vec4(a,1),vec4(b,alpha)).rgb;\n}\nuniform float gridSize;\nuniform vec2 pan;\nvec3 uv2cell(vec2 uv,vec2 txSize){\nuv=uv*2.-1.;\nuv+=0.5/txSize;\nfloat s=txSize.x/2.;\nfloat g=gridSize;\nvec3 hex,pix,cel;\nhex=vec3(uv,-uv.x-uv.y);\nhex=hex*s/g;\ncel=roundGrid(hex,g);\nreturn cel;\n}\nvec3 uv2cell(vec2 uv){\nreturn uv2cell(uv,size);\n}\nvec2 cell2uv(vec3 hex,vec2 txSize){\nvec2 uv=hex.xy;\nuv=uv/txSize+0.5;\nuv-=0.5/txSize;\nreturn uv;\n}\nvec2 cell2uv(vec3 hex){\nreturn cell2uv(hex,size);\n}\n#define LW 1./360.\nuniform sampler2D[3]textureArray;\nvec4 sampCell(vec3 hex){\nvec2 uv=cell2uv(hex,lastSize);\nreturn texture(inputTexture,uv);\n}\nvec4 sampCursor(vec3 hex){\nvec2 uv=cell2uv(hex,lastSize);\nreturn texture(textureArray[0],uv);\n}\nvoid main(){\nvec3 c,ck;\nfragColor=unit.yyyx;\nvec2 uv=gl_FragCoord.xy/size;\nuv+=0.000001;\nvec2 cv,dv;\nfloat scale;\nscale=1.;\ncv=uv*2.-1.;\ncv*=cover;\ncv*=zoom;\ncv+=pan;\nvec3 hex,cel,ncel,rawhex;\nvec3 dist,p[3],n[6];\nvec2 k0,k1;\nfloat d,k;\nfloat t,ts,te,q,qc,lw,lwc;\nvec4 s0,s1,b0,b1;\nvec3 p0,p1;\nvec2 c0,c1,cd0,cd1,ld,l0,l1;\nfloat r,rp,rx,ry,gl,cc,sl,lc;\nvec2 max1,max2,min1,min2;\nt=skipTime;\nts=smoothstep(0.,0.5,t);\nte=smoothstep(0.5,1.,t);\nq=4./amax(size)*scale*zoom;\nqc=q*gridSize*2.;\nlw=1./360.*scale*min(zoom,1.);\nlwc=lw*gridSize*2.;\nrp=1./12.;\nrawhex=cart2hex*cv;\nhex=hex2grid(rawhex)*gridSize;\ndv=hex2cart*hex/gridSize;\ndist=interpolatedCubic(hex,p);\nn=vec3[6](p[1],p[2],p[1]-p[2]+p[0],p[2]-p[1]+p[0],p[0]-p[1]+p[0],p[0]-p[2]+p[0]);\np0=p[0];\ncel=hex2hex*(hex-p0)*sr3;\nc0=hex2cart*p[0]/gridSize;\ncc=length(c0-hex2cart*hex/gridSize);\ns0=sampCell(p0);\nb0=openStep(0.,s0);\nk0=sampCursor(p0).xy;\nmax1=vec2(amax(s0.xz),amax(s0.yw));\nmin1=vec2(amin(s0.xy),amin(s0.zw));\nld+=100.;\nd+=100.;\ngl=length(c0-hex2cart*n[0]/gridSize);\nncel=(hex-p0)*2.;\nr=amax(ncel)/(2.);\nry=mix(min(1.-ts,s0.w),max(ts,s0.w),b0.y);\nd=mix(d,min(d,abs(ry-r)),amax(b0.yw)*step(0.5,1.-t));\nfor(int i=0; i<6; i++){\np1=n[i];\nc1=hex2cart*p1/gridSize;\ns1=sampCell(p1);\nb1=openStep(0.,s1);\nncel=(hex-p1)*2.;\nr=amax(ncel)/(2.);\nry=mix(min(1.-ts,s1.w),max(ts,s1.w),b1.y);\nd=min(d,abs(ry-r));\nif(i>1&&cc>lw*4.)break;\nmax2=vec2(amax(s1.xz),amax(s1.yw));\nmin2=vec2(amin(s1.xy),amin(s1.zw));\nfor(int j=0; j<2; j++){\nint k=j+2;\nif(max1[j]>0.&&max2[j]>0.){\ncd0=c1+(c0-c1)*max(min(b0[j],b0[k]),max((1.-ts)*b0[k],ts*b0[j]));\ncd1=c0+(c1-c0)*max(min(b1[j],b1[k]),max((1.-ts)*b1[k],ts*b1[j]));\nif(length(c0-cd0)<gl/2.||length(c1-cd1)<gl/2.){\nif(length(cd0-cd1)>0.01){\nsl=slength(cd0,cd1,dv);\nld[j]=min(ld[j],sl);\n}\n}\n}\n}\n}\nrx=mix(smoothstep(0.25,1.,s0.z-(s0.z-s0.x)*t),max(te,s0.z),openStep(0.,s0.x-s0.z));\nr=length(cel)*sr3/2./(1.-rp*2.);\nc+=unit.xxx*qs(rx-r,qc)*0.25*smoothstep(1./16.,1./8.,rx);\nk=qs(rx-r,qc)*k0.x;\nrx=smoothstep(0.25,1.,k0.y);\nk=max(k,qw(abs(rx-r),qc,lwc)*rx);\nry=mix(min(1.-ts,s0.w),max(ts,s0.w),b0.y);\nr=amax(cel)/(1.-rp);\nc+=unit.xxx*qs(ry-r,qc)*0.5;\nl0=qw(ld,q,lw);\nl1=qw(ld,q,lw*3.);\nlc=max(l0.x*(1.-l1.y),xsum(l0.y,l1.y));\nc=alphamul(c,unit.xxx,lc*0.5);\nd=qw(d,qc/2.,lwc/2.);\nd=max(0.,d-max(l0.x,l1.y));\nc=alphamul(c,unit.xxx,d*0.25);\nrawhex=roundCubic(rawhex*gridSize)/gridSize;\nck=abs(rawhex);\nck=rgb2hsv(ck);\nck.x+=amax(rawhex);\nck.y=0.75;\nck.z=5./6.*amax(k0);\nck=hsv2rgb(ck);\nc=mix(c,ck,k);\nc=clamp(c,0.,1.)*htWhite;\nfragColor=vec4(c,1);\n}"},110:n=>{n.exports="#version 300 es\nprecision highp float;\nout vec4 fragColor;\nin vec4 vColor;\nuniform float counter;\nuniform float duration;\nuniform float time;\nuniform float skipInterval;\nuniform float skipTime;\nuniform bool skip;\nuniform vec2 size;\nuniform vec2 cover;\nuniform vec2 contain;\nuniform vec2 lastSize;\nuniform vec2 parallax;\nuniform vec2 dir;\nuniform float zoom;\nuniform float resizeAt;\nuniform bool resize;\nuniform float cursorDownAt;\nuniform float cursorUpAt;\nuniform vec3 cursorHex;\nuniform vec3 cursorHexRounded;\nuniform vec2 cursorPos;\nuniform vec2 cursorLastPos;\nuniform vec2 cursorDownPos;\nuniform vec2 cursorUpPos;\nuniform bool cursorDown;\nuniform float cursorAngle;\nuniform bool shiftKey;\nuniform sampler2D inputTexture;\nuniform sampler2D lastTexture;\nvec3 unit=vec3(1,0,-1);\n#define pi 3.141592653589793\n#define tau 6.283185307179586\n#define sr2 1.4142135623730951\n#define sr3 1.7320508075688772\n#define ir3 0.5773502691896257\nmat3x2 hex2cart=mat3x2(vec2(0,0),vec2(1,0),vec2(0.5,sr3/2.));\nmat2x3 cart2hex=mat2x3(vec3(-1,1,0),vec3(-1./sr3,-1./sr3,2./sr3));\nmat3 hex2hex=mat3(1./3.,1./3.-ir3,1./3.+ir3,1./3.+ir3,1./3.,1./3.-ir3,1./3.-ir3,1./3.+ir3,1./3.);\nvec3 htWhite=1.-vec3(1./36.,1./24.,1./12.);\nbool isNan(float n){\nreturn!(n<=0.||0.<=n);\n}\nfloat amax(vec4 v){\nreturn max(max(max(abs(v.x),abs(v.y)),abs(v.z)),abs(v.w));\n}\nfloat amax(vec3 v){\nreturn max(max(abs(v.x),abs(v.y)),abs(v.z));\n}\nfloat amax(vec2 v){\nreturn max(abs(v.x),abs(v.y));\n}\nfloat amin(vec3 v){\nv=abs(v);\nreturn min(min(v.x,v.y),v.z);\n}\nfloat amin(vec2 v){\nv=abs(v);\nreturn min(v.x,v.y);\n}\nfloat osc(float n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nvec2 osc(vec2 n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nvec3 osc(vec3 n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nfloat tsin(float n){\nreturn sin(n*tau);\n}\nfloat tcos(float n){\nreturn cos(n*tau);\n}\nvec2 tsin(vec2 n){\nreturn sin(n*tau);\n}\nvec2 tcos(vec2 n){\nreturn cos(n*tau);\n}\nvec3 tsin(vec3 n){\nreturn sin(n*tau);\n}\nvec3 tcos(vec3 n){\nreturn cos(n*tau);\n}\nfloat sum(vec2 p){\nreturn p.x+p.y;\n}\nfloat sum(vec3 p){\nreturn p.x+p.y+p.z;\n}\nfloat prod(vec2 p){\nreturn p.x*p.y;\n}\nfloat prod(vec3 p){\nreturn p.x*p.y*p.z;\n}\nfloat xsum(float s,float q){\nreturn s+q-2.*s*q;\n}\nvec2 xsum(vec2 s,vec2 q){\nreturn s+q-2.*s*q;\n}\nvec3 xsum(vec3 s,vec3 q){\nreturn s+q-2.*s*q;\n}\nvec2 rot(vec2 p,float a){\nfloat ca=cos(a);\nfloat sa=sin(a);\nreturn mat2(ca,sa,-sa,ca)*p;\n}\nvec3 rot(vec3 p,vec3 u,float a){\nfloat cosa=cos(a);\nfloat cosa1=1.-cosa;\nfloat sina=sin(a);\nmat3 m=mat3(cosa+u.x*u.x*cosa1,u.x*u.y*cosa1+u.z*sina,u.z*u.x*cosa1-u.y*sina,u.x*u.y*cosa1-u.z*sina,cosa+u.y*u.y*cosa1,u.z*u.y*cosa1+u.x*sina,u.x*u.z*cosa1+u.y*sina,u.y*u.z*cosa1-u.x*sina,cosa+u.z*u.z*cosa1);\nreturn m*p;\n}\nvec2 trot(vec2 p,float a){\nreturn rot(p,a*tau);\n}\nvec3 trot(vec3 p,vec3 u,float a){\nreturn rot(p,u,a*tau);\n}\nvec2 project(vec2 a,vec2 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec3 project(vec3 a,vec3 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec4 project(vec4 a,vec4 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec3 hexProject(vec3 p){\nvec3 n=project(p,unit.xxx);\nreturn p-n;\n}\nfloat tatan(vec2 v){\nfloat a=atan(v.y,v.x);\na+=pi;\na/=tau;\na=fract(a-0.25);\na=1.-a;\nreturn a;\n}\nvec4 dreflect(vec4 cv,vec4 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec3 dreflect(vec3 cv,vec3 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 dreflect(vec2 cv,vec2 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 dreflect(vec2 cv,float a){\nvec2 n=vec2(cos(a),sin(a));\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 treflect(vec2 cv,float a){\nreturn dreflect(cv,a*tau);\n}\nfloat qw(float n,float q,float w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nvec2 qw(vec2 n,float q,float w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nvec2 qw(vec2 n,float q,vec2 w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nfloat qs(float n,float q){\nreturn smoothstep(-q/2.,q/2.,n);\n}\nfloat qwp(float n,float q,float w){\nreturn qw(abs(fract(n+0.5)-0.5),q,w);\n}\nfloat openStep(float m,float n){\nreturn 1.-step(m,-n);\n}\nvec2 openStep(float m,vec2 n){\nreturn 1.-step(m,-n);\n}\nvec3 openStep(float m,vec3 n){\nreturn 1.-step(m,-n);\n}\nvec4 openStep(float m,vec4 n){\nreturn 1.-step(m,-n);\n}\nfloat linearStep(float a,float b,float n){\nreturn clamp((n-a)/(b-a),0.,1.);\n}\nfloat slength(vec2 u,vec2 v,vec2 p){\nvec2 w,x,z;\nw=u-v;\nx=p-v;\nz=project(x,w);\nz=clamp(z,min(w,unit.yy),max(w,unit.yy));\nreturn length(z-x);\n}\nvec3 roundCubic(vec3 p){\nvec3 r=round(p);\nvec3 d=abs(r-p);\nif(d.x>d.y&&d.x>d.z)r.x=-r.y-r.z;\nelse if(d.y>d.z)r.y=-r.x-r.z;\nelse\nr.z=-r.x-r.y;\nreturn r;\n}\nvec3 hex2grid(vec3 hex){\nvec3 p;\nhex=hex2hex*(hex/sr3);\np=roundCubic(hex);\np=hex-p;\np=-(hex2hex*(p*sr3));\nreturn p;\n}\nvec3 roundGrid(vec3 hex,float gridSize){\nvec3 p=hex2grid(hex);\np*=gridSize;\np=roundCubic(p);\nreturn p;\n}\nvec3 interpolatedCubic(vec3 p,out vec3 v[3]){\nvec3 q,d,r,fl,cl,alt;\nint i0,i1,i2;\nfl=floor(p);\ncl=ceil(p);\nr=round(p);\nd=abs(r-p);\nfor(int i=0; i<3; i++)alt[i]=r[i]==fl[i]?cl[i]:fl[i];\nif(d.x>d.y&&d.x>d.z)i0=0;\nelse if(d.y>d.z)i0=1;\nelse\ni0=2;\ni1=(i0+1)% 3;\ni2=(i0+2)% 3;\nr[i0]=-r[i1]-r[i2];\nv[0]=v[1]=v[2]=r;\nv[1][i1]=alt[i1];\nv[1][i0]=-v[1][i1]-v[1][i2];\nv[2][i2]=alt[i2];\nv[2][i0]=-v[2][i1]-v[2][i2];\nfor(int i=0; i<3; i++)q[i]=1.-amax(v[i]-p);\nq=q/sum(q);\nif(q.y<q.z){\nq.yz=q.zy;\nvec3 temp=v[1];\nv[1]=v[2];\nv[2]=temp;\n}\nreturn q;\n}\nvec4 hexbin(vec2 cv,float s){\nfloat res=s/3.;\nvec2 base,dv;\nbase=cv;\ncv*=res;\nvec2 r=vec2(1.,1./sr3);\nr=vec2(r.y,r.x);\nvec2 h=r*0.5;\nvec2 a=mod(cv,r)-h;\nvec2 b=mod(cv-h,r)-h;\nfloat delta=length(a)-length(b);\ndv=delta<0.?a:b;\na=mod(base,r)-h;\nb=mod(base-h,r)-h;\nvec2 coord=length(a)<length(b)?a:b;\ncoord=(cv-dv)/res;\ndv*=3.;\nreturn vec4(dv,coord);\n}\nfloat quantize(float f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nvec2 quantize(vec2 f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nvec3 quantize(vec3 f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nfloat quantize(float f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec2 quantize(vec2 f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec3 quantize(vec3 f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec2 scaleUv(vec2 uv,float n){\nreturn((uv*2.-1.)*n)*0.5+0.5;\n}\nvec4 rgb2hsv(vec4 c){\nc=clamp(c,0.,1.);\nvec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);\nvec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));\nvec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));\nfloat d=q.x-min(q.w,q.y);\nfloat e=1.0e-10;\nreturn vec4(abs(q.z+(q.w-q.y)/(6.0*d+e)),d/(q.x+e),q.x,c.w);\n}\nvec4 hsv2rgb(vec4 c){\nc.yzw=clamp(c.yzw,0.,1.);\nvec4 K=vec4(1.,2./3.,1./3.,3.);\nvec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);\nreturn vec4(c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y),c.w);\n}\nvec3 rgb2hsv(vec3 c){\nreturn rgb2hsv(vec4(c,1)).xyz;\n}\nvec3 hsv2rgb(vec3 c){\nreturn hsv2rgb(vec4(c,1)).xyz;\n}\nvec4 alphamul(vec4 a,vec4 b){\nreturn vec4(b.a*b.rgb+a.a*a.rgb*(1.-b.a),b.a+a.a*(1.-b.a));\n}\nvec3 alphamul(vec3 a,vec3 b,float alpha){\nreturn alphamul(vec4(a,1),vec4(b,alpha)).rgb;\n}\nuniform float gridSize;\nuniform vec2 pan;\nvec3 uv2cell(vec2 uv,vec2 txSize){\nuv=uv*2.-1.;\nuv+=0.5/txSize;\nfloat s=txSize.x/2.;\nfloat g=gridSize;\nvec3 hex,pix,cel;\nhex=vec3(uv,-uv.x-uv.y);\nhex=hex*s/g;\ncel=roundGrid(hex,g);\nreturn cel;\n}\nvec3 uv2cell(vec2 uv){\nreturn uv2cell(uv,size);\n}\nvec2 cell2uv(vec3 hex,vec2 txSize){\nvec2 uv=hex.xy;\nuv=uv/txSize+0.5;\nuv-=0.5/txSize;\nreturn uv;\n}\nvec2 cell2uv(vec3 hex){\nreturn cell2uv(hex,size);\n}\nuniform sampler2D noiseTexture;\nuniform sampler2D[3]textureArray;\nvec4 sampCell(vec3 hex){\nvec2 uv=cell2uv(hex);\nreturn texture(lastTexture,uv);\n}\nvec4 sampCursor(vec3 hex){\nvec2 uv=cell2uv(hex);\nreturn texture(textureArray[0],uv);\n}\nvec3 nbrs[6]=vec3[6](vec3(1,0,-1),vec3(0,1,-1),vec3(-1,1,0),vec3(-1,0,1),vec3(0,-1,1),vec3(1,-1,0));\nvec4 rule(vec3 hex){\nvec4 cur,next;\nfloat n,map;\ncur=sampCell(hex);\nfor(int i=0; i<6; i++){\nvec3 v=nbrs[i];\nvec4 nbr=sampCell(hex+v);\nn+=openStep(0.,nbr.x);\nmap+=openStep(0.,nbr.y)*pow(2.,float(i));\n}\nnext=cur;\nif((map==32.+16.||map==16.+8.||map==8.+4.||map==4.+2.||map==2.+1.||map==1.+32.||map==32.+4.||map==16.+2.||map==8.+1.)||cur.y>0.&&(map==1.+4.+16.||map==2.+8.+32.)){\nnext.y=1.;\n}\nelse {\nnext.y=0.;\n}\nif(cur.x==0.&&n==1.){\nnext.x=1.;\nnext.y=1.;\n}\nelse {\nnext.x=max(0.,cur.x-1./8.-1./8.*next.y);\n}\nnext.zw=cur.xy;\nreturn next;\n}\nvoid main(){\nvec4 c;\nvec2 uv=gl_FragCoord.xy/size;\nvec2 cv=uv*2.-1.;\nvec3 hex=uv2cell(uv);\nif(counter==0.){\nvec2 v=hex2cart*hex/gridSize;\nv=v*0.5+0.5;\nvec2 tx=texture(noiseTexture,v).xy;\ntx=openStep(0.,tx);\nc.xy=tx;\nc.xy*=(1.-float(shiftKey));\n}\nelse if(skip){\nc=rule(hex);\n}\nelse {\nc=texture(lastTexture,uv);\n}\nvec2 click=sampCursor(hex).xy;\nc+=step(1.,click.x)-step(1.,click.y);\nfragColor=vec4(c);\n}"},278:n=>{n.exports="uniform float gridSize;\nuniform vec2 pan;\nvec3 uv2cell(vec2 uv,vec2 txSize){\nuv=uv*2.-1.;\nuv+=0.5/txSize;\nfloat s=txSize.x/2.;\nfloat g=gridSize;\nvec3 hex,pix,cel;\nhex=vec3(uv,-uv.x-uv.y);\nhex=hex*s/g;\ncel=roundGrid(hex,g);\nreturn cel;\n}\nvec3 uv2cell(vec2 uv){\nreturn uv2cell(uv,size);\n}\nvec2 cell2uv(vec3 hex,vec2 txSize){\nvec2 uv=hex.xy;\nuv=uv/txSize+0.5;\nuv-=0.5/txSize;\nreturn uv;\n}\nvec2 cell2uv(vec3 hex){\nreturn cell2uv(hex,size);\n}"},63:n=>{n.exports="#version 300 es\nprecision highp float;\nout vec4 fragColor;\nin vec4 vColor;\nuniform float counter;\nuniform float duration;\nuniform float time;\nuniform float skipInterval;\nuniform float skipTime;\nuniform bool skip;\nuniform vec2 size;\nuniform vec2 cover;\nuniform vec2 contain;\nuniform vec2 lastSize;\nuniform vec2 parallax;\nuniform vec2 dir;\nuniform float zoom;\nuniform float resizeAt;\nuniform bool resize;\nuniform float cursorDownAt;\nuniform float cursorUpAt;\nuniform vec3 cursorHex;\nuniform vec3 cursorHexRounded;\nuniform vec2 cursorPos;\nuniform vec2 cursorLastPos;\nuniform vec2 cursorDownPos;\nuniform vec2 cursorUpPos;\nuniform bool cursorDown;\nuniform float cursorAngle;\nuniform bool shiftKey;\nuniform sampler2D inputTexture;\nuniform sampler2D lastTexture;\nvec3 unit=vec3(1,0,-1);\n#define pi 3.141592653589793\n#define tau 6.283185307179586\n#define sr2 1.4142135623730951\n#define sr3 1.7320508075688772\n#define ir3 0.5773502691896257\nmat3x2 hex2cart=mat3x2(vec2(0,0),vec2(1,0),vec2(0.5,sr3/2.));\nmat2x3 cart2hex=mat2x3(vec3(-1,1,0),vec3(-1./sr3,-1./sr3,2./sr3));\nmat3 hex2hex=mat3(1./3.,1./3.-ir3,1./3.+ir3,1./3.+ir3,1./3.,1./3.-ir3,1./3.-ir3,1./3.+ir3,1./3.);\nvec3 htWhite=1.-vec3(1./36.,1./24.,1./12.);\nbool isNan(float n){\nreturn!(n<=0.||0.<=n);\n}\nfloat amax(vec4 v){\nreturn max(max(max(abs(v.x),abs(v.y)),abs(v.z)),abs(v.w));\n}\nfloat amax(vec3 v){\nreturn max(max(abs(v.x),abs(v.y)),abs(v.z));\n}\nfloat amax(vec2 v){\nreturn max(abs(v.x),abs(v.y));\n}\nfloat amin(vec3 v){\nv=abs(v);\nreturn min(min(v.x,v.y),v.z);\n}\nfloat amin(vec2 v){\nv=abs(v);\nreturn min(v.x,v.y);\n}\nfloat osc(float n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nvec2 osc(vec2 n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nvec3 osc(vec3 n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nfloat tsin(float n){\nreturn sin(n*tau);\n}\nfloat tcos(float n){\nreturn cos(n*tau);\n}\nvec2 tsin(vec2 n){\nreturn sin(n*tau);\n}\nvec2 tcos(vec2 n){\nreturn cos(n*tau);\n}\nvec3 tsin(vec3 n){\nreturn sin(n*tau);\n}\nvec3 tcos(vec3 n){\nreturn cos(n*tau);\n}\nfloat sum(vec2 p){\nreturn p.x+p.y;\n}\nfloat sum(vec3 p){\nreturn p.x+p.y+p.z;\n}\nfloat prod(vec2 p){\nreturn p.x*p.y;\n}\nfloat prod(vec3 p){\nreturn p.x*p.y*p.z;\n}\nfloat xsum(float s,float q){\nreturn s+q-2.*s*q;\n}\nvec2 xsum(vec2 s,vec2 q){\nreturn s+q-2.*s*q;\n}\nvec3 xsum(vec3 s,vec3 q){\nreturn s+q-2.*s*q;\n}\nvec2 rot(vec2 p,float a){\nfloat ca=cos(a);\nfloat sa=sin(a);\nreturn mat2(ca,sa,-sa,ca)*p;\n}\nvec3 rot(vec3 p,vec3 u,float a){\nfloat cosa=cos(a);\nfloat cosa1=1.-cosa;\nfloat sina=sin(a);\nmat3 m=mat3(cosa+u.x*u.x*cosa1,u.x*u.y*cosa1+u.z*sina,u.z*u.x*cosa1-u.y*sina,u.x*u.y*cosa1-u.z*sina,cosa+u.y*u.y*cosa1,u.z*u.y*cosa1+u.x*sina,u.x*u.z*cosa1+u.y*sina,u.y*u.z*cosa1-u.x*sina,cosa+u.z*u.z*cosa1);\nreturn m*p;\n}\nvec2 trot(vec2 p,float a){\nreturn rot(p,a*tau);\n}\nvec3 trot(vec3 p,vec3 u,float a){\nreturn rot(p,u,a*tau);\n}\nvec2 project(vec2 a,vec2 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec3 project(vec3 a,vec3 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec4 project(vec4 a,vec4 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec3 hexProject(vec3 p){\nvec3 n=project(p,unit.xxx);\nreturn p-n;\n}\nfloat tatan(vec2 v){\nfloat a=atan(v.y,v.x);\na+=pi;\na/=tau;\na=fract(a-0.25);\na=1.-a;\nreturn a;\n}\nvec4 dreflect(vec4 cv,vec4 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec3 dreflect(vec3 cv,vec3 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 dreflect(vec2 cv,vec2 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 dreflect(vec2 cv,float a){\nvec2 n=vec2(cos(a),sin(a));\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 treflect(vec2 cv,float a){\nreturn dreflect(cv,a*tau);\n}\nfloat qw(float n,float q,float w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nvec2 qw(vec2 n,float q,float w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nvec2 qw(vec2 n,float q,vec2 w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nfloat qs(float n,float q){\nreturn smoothstep(-q/2.,q/2.,n);\n}\nfloat qwp(float n,float q,float w){\nreturn qw(abs(fract(n+0.5)-0.5),q,w);\n}\nfloat openStep(float m,float n){\nreturn 1.-step(m,-n);\n}\nvec2 openStep(float m,vec2 n){\nreturn 1.-step(m,-n);\n}\nvec3 openStep(float m,vec3 n){\nreturn 1.-step(m,-n);\n}\nvec4 openStep(float m,vec4 n){\nreturn 1.-step(m,-n);\n}\nfloat linearStep(float a,float b,float n){\nreturn clamp((n-a)/(b-a),0.,1.);\n}\nfloat slength(vec2 u,vec2 v,vec2 p){\nvec2 w,x,z;\nw=u-v;\nx=p-v;\nz=project(x,w);\nz=clamp(z,min(w,unit.yy),max(w,unit.yy));\nreturn length(z-x);\n}\nvec3 roundCubic(vec3 p){\nvec3 r=round(p);\nvec3 d=abs(r-p);\nif(d.x>d.y&&d.x>d.z)r.x=-r.y-r.z;\nelse if(d.y>d.z)r.y=-r.x-r.z;\nelse\nr.z=-r.x-r.y;\nreturn r;\n}\nvec3 hex2grid(vec3 hex){\nvec3 p;\nhex=hex2hex*(hex/sr3);\np=roundCubic(hex);\np=hex-p;\np=-(hex2hex*(p*sr3));\nreturn p;\n}\nvec3 roundGrid(vec3 hex,float gridSize){\nvec3 p=hex2grid(hex);\np*=gridSize;\np=roundCubic(p);\nreturn p;\n}\nvec3 interpolatedCubic(vec3 p,out vec3 v[3]){\nvec3 q,d,r,fl,cl,alt;\nint i0,i1,i2;\nfl=floor(p);\ncl=ceil(p);\nr=round(p);\nd=abs(r-p);\nfor(int i=0; i<3; i++)alt[i]=r[i]==fl[i]?cl[i]:fl[i];\nif(d.x>d.y&&d.x>d.z)i0=0;\nelse if(d.y>d.z)i0=1;\nelse\ni0=2;\ni1=(i0+1)% 3;\ni2=(i0+2)% 3;\nr[i0]=-r[i1]-r[i2];\nv[0]=v[1]=v[2]=r;\nv[1][i1]=alt[i1];\nv[1][i0]=-v[1][i1]-v[1][i2];\nv[2][i2]=alt[i2];\nv[2][i0]=-v[2][i1]-v[2][i2];\nfor(int i=0; i<3; i++)q[i]=1.-amax(v[i]-p);\nq=q/sum(q);\nif(q.y<q.z){\nq.yz=q.zy;\nvec3 temp=v[1];\nv[1]=v[2];\nv[2]=temp;\n}\nreturn q;\n}\nvec4 hexbin(vec2 cv,float s){\nfloat res=s/3.;\nvec2 base,dv;\nbase=cv;\ncv*=res;\nvec2 r=vec2(1.,1./sr3);\nr=vec2(r.y,r.x);\nvec2 h=r*0.5;\nvec2 a=mod(cv,r)-h;\nvec2 b=mod(cv-h,r)-h;\nfloat delta=length(a)-length(b);\ndv=delta<0.?a:b;\na=mod(base,r)-h;\nb=mod(base-h,r)-h;\nvec2 coord=length(a)<length(b)?a:b;\ncoord=(cv-dv)/res;\ndv*=3.;\nreturn vec4(dv,coord);\n}\nfloat quantize(float f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nvec2 quantize(vec2 f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nvec3 quantize(vec3 f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nfloat quantize(float f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec2 quantize(vec2 f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec3 quantize(vec3 f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec2 scaleUv(vec2 uv,float n){\nreturn((uv*2.-1.)*n)*0.5+0.5;\n}\nvec4 rgb2hsv(vec4 c){\nc=clamp(c,0.,1.);\nvec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);\nvec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));\nvec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));\nfloat d=q.x-min(q.w,q.y);\nfloat e=1.0e-10;\nreturn vec4(abs(q.z+(q.w-q.y)/(6.0*d+e)),d/(q.x+e),q.x,c.w);\n}\nvec4 hsv2rgb(vec4 c){\nc.yzw=clamp(c.yzw,0.,1.);\nvec4 K=vec4(1.,2./3.,1./3.,3.);\nvec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);\nreturn vec4(c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y),c.w);\n}\nvec3 rgb2hsv(vec3 c){\nreturn rgb2hsv(vec4(c,1)).xyz;\n}\nvec3 hsv2rgb(vec3 c){\nreturn hsv2rgb(vec4(c,1)).xyz;\n}\nvec4 alphamul(vec4 a,vec4 b){\nreturn vec4(b.a*b.rgb+a.a*a.rgb*(1.-b.a),b.a+a.a*(1.-b.a));\n}\nvec3 alphamul(vec3 a,vec3 b,float alpha){\nreturn alphamul(vec4(a,1),vec4(b,alpha)).rgb;\n}"},494:n=>{n.exports="#version 300 es\nprecision highp float;\nout vec4 fragColor;\nin vec4 vColor;\nuniform float counter;\nuniform float duration;\nuniform float time;\nuniform float skipInterval;\nuniform float skipTime;\nuniform bool skip;\nuniform vec2 size;\nuniform vec2 cover;\nuniform vec2 contain;\nuniform vec2 lastSize;\nuniform vec2 parallax;\nuniform vec2 dir;\nuniform float zoom;\nuniform float resizeAt;\nuniform bool resize;\nuniform float cursorDownAt;\nuniform float cursorUpAt;\nuniform vec3 cursorHex;\nuniform vec3 cursorHexRounded;\nuniform vec2 cursorPos;\nuniform vec2 cursorLastPos;\nuniform vec2 cursorDownPos;\nuniform vec2 cursorUpPos;\nuniform bool cursorDown;\nuniform float cursorAngle;\nuniform bool shiftKey;\nuniform sampler2D inputTexture;\nuniform sampler2D lastTexture;\nvec3 unit=vec3(1,0,-1);\n#define pi 3.141592653589793\n#define tau 6.283185307179586\n#define sr2 1.4142135623730951\n#define sr3 1.7320508075688772\n#define ir3 0.5773502691896257\nmat3x2 hex2cart=mat3x2(vec2(0,0),vec2(1,0),vec2(0.5,sr3/2.));\nmat2x3 cart2hex=mat2x3(vec3(-1,1,0),vec3(-1./sr3,-1./sr3,2./sr3));\nmat3 hex2hex=mat3(1./3.,1./3.-ir3,1./3.+ir3,1./3.+ir3,1./3.,1./3.-ir3,1./3.-ir3,1./3.+ir3,1./3.);\nvec3 htWhite=1.-vec3(1./36.,1./24.,1./12.);\nbool isNan(float n){\nreturn!(n<=0.||0.<=n);\n}\nfloat amax(vec4 v){\nreturn max(max(max(abs(v.x),abs(v.y)),abs(v.z)),abs(v.w));\n}\nfloat amax(vec3 v){\nreturn max(max(abs(v.x),abs(v.y)),abs(v.z));\n}\nfloat amax(vec2 v){\nreturn max(abs(v.x),abs(v.y));\n}\nfloat amin(vec3 v){\nv=abs(v);\nreturn min(min(v.x,v.y),v.z);\n}\nfloat amin(vec2 v){\nv=abs(v);\nreturn min(v.x,v.y);\n}\nfloat osc(float n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nvec2 osc(vec2 n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nvec3 osc(vec3 n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nfloat tsin(float n){\nreturn sin(n*tau);\n}\nfloat tcos(float n){\nreturn cos(n*tau);\n}\nvec2 tsin(vec2 n){\nreturn sin(n*tau);\n}\nvec2 tcos(vec2 n){\nreturn cos(n*tau);\n}\nvec3 tsin(vec3 n){\nreturn sin(n*tau);\n}\nvec3 tcos(vec3 n){\nreturn cos(n*tau);\n}\nfloat sum(vec2 p){\nreturn p.x+p.y;\n}\nfloat sum(vec3 p){\nreturn p.x+p.y+p.z;\n}\nfloat prod(vec2 p){\nreturn p.x*p.y;\n}\nfloat prod(vec3 p){\nreturn p.x*p.y*p.z;\n}\nfloat xsum(float s,float q){\nreturn s+q-2.*s*q;\n}\nvec2 xsum(vec2 s,vec2 q){\nreturn s+q-2.*s*q;\n}\nvec3 xsum(vec3 s,vec3 q){\nreturn s+q-2.*s*q;\n}\nvec2 rot(vec2 p,float a){\nfloat ca=cos(a);\nfloat sa=sin(a);\nreturn mat2(ca,sa,-sa,ca)*p;\n}\nvec3 rot(vec3 p,vec3 u,float a){\nfloat cosa=cos(a);\nfloat cosa1=1.-cosa;\nfloat sina=sin(a);\nmat3 m=mat3(cosa+u.x*u.x*cosa1,u.x*u.y*cosa1+u.z*sina,u.z*u.x*cosa1-u.y*sina,u.x*u.y*cosa1-u.z*sina,cosa+u.y*u.y*cosa1,u.z*u.y*cosa1+u.x*sina,u.x*u.z*cosa1+u.y*sina,u.y*u.z*cosa1-u.x*sina,cosa+u.z*u.z*cosa1);\nreturn m*p;\n}\nvec2 trot(vec2 p,float a){\nreturn rot(p,a*tau);\n}\nvec3 trot(vec3 p,vec3 u,float a){\nreturn rot(p,u,a*tau);\n}\nvec2 project(vec2 a,vec2 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec3 project(vec3 a,vec3 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec4 project(vec4 a,vec4 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec3 hexProject(vec3 p){\nvec3 n=project(p,unit.xxx);\nreturn p-n;\n}\nfloat tatan(vec2 v){\nfloat a=atan(v.y,v.x);\na+=pi;\na/=tau;\na=fract(a-0.25);\na=1.-a;\nreturn a;\n}\nvec4 dreflect(vec4 cv,vec4 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec3 dreflect(vec3 cv,vec3 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 dreflect(vec2 cv,vec2 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 dreflect(vec2 cv,float a){\nvec2 n=vec2(cos(a),sin(a));\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 treflect(vec2 cv,float a){\nreturn dreflect(cv,a*tau);\n}\nfloat qw(float n,float q,float w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nvec2 qw(vec2 n,float q,float w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nvec2 qw(vec2 n,float q,vec2 w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nfloat qs(float n,float q){\nreturn smoothstep(-q/2.,q/2.,n);\n}\nfloat qwp(float n,float q,float w){\nreturn qw(abs(fract(n+0.5)-0.5),q,w);\n}\nfloat openStep(float m,float n){\nreturn 1.-step(m,-n);\n}\nvec2 openStep(float m,vec2 n){\nreturn 1.-step(m,-n);\n}\nvec3 openStep(float m,vec3 n){\nreturn 1.-step(m,-n);\n}\nvec4 openStep(float m,vec4 n){\nreturn 1.-step(m,-n);\n}\nfloat linearStep(float a,float b,float n){\nreturn clamp((n-a)/(b-a),0.,1.);\n}\nfloat slength(vec2 u,vec2 v,vec2 p){\nvec2 w,x,z;\nw=u-v;\nx=p-v;\nz=project(x,w);\nz=clamp(z,min(w,unit.yy),max(w,unit.yy));\nreturn length(z-x);\n}\nvec3 roundCubic(vec3 p){\nvec3 r=round(p);\nvec3 d=abs(r-p);\nif(d.x>d.y&&d.x>d.z)r.x=-r.y-r.z;\nelse if(d.y>d.z)r.y=-r.x-r.z;\nelse\nr.z=-r.x-r.y;\nreturn r;\n}\nvec3 hex2grid(vec3 hex){\nvec3 p;\nhex=hex2hex*(hex/sr3);\np=roundCubic(hex);\np=hex-p;\np=-(hex2hex*(p*sr3));\nreturn p;\n}\nvec3 roundGrid(vec3 hex,float gridSize){\nvec3 p=hex2grid(hex);\np*=gridSize;\np=roundCubic(p);\nreturn p;\n}\nvec3 interpolatedCubic(vec3 p,out vec3 v[3]){\nvec3 q,d,r,fl,cl,alt;\nint i0,i1,i2;\nfl=floor(p);\ncl=ceil(p);\nr=round(p);\nd=abs(r-p);\nfor(int i=0; i<3; i++)alt[i]=r[i]==fl[i]?cl[i]:fl[i];\nif(d.x>d.y&&d.x>d.z)i0=0;\nelse if(d.y>d.z)i0=1;\nelse\ni0=2;\ni1=(i0+1)% 3;\ni2=(i0+2)% 3;\nr[i0]=-r[i1]-r[i2];\nv[0]=v[1]=v[2]=r;\nv[1][i1]=alt[i1];\nv[1][i0]=-v[1][i1]-v[1][i2];\nv[2][i2]=alt[i2];\nv[2][i0]=-v[2][i1]-v[2][i2];\nfor(int i=0; i<3; i++)q[i]=1.-amax(v[i]-p);\nq=q/sum(q);\nif(q.y<q.z){\nq.yz=q.zy;\nvec3 temp=v[1];\nv[1]=v[2];\nv[2]=temp;\n}\nreturn q;\n}\nvec4 hexbin(vec2 cv,float s){\nfloat res=s/3.;\nvec2 base,dv;\nbase=cv;\ncv*=res;\nvec2 r=vec2(1.,1./sr3);\nr=vec2(r.y,r.x);\nvec2 h=r*0.5;\nvec2 a=mod(cv,r)-h;\nvec2 b=mod(cv-h,r)-h;\nfloat delta=length(a)-length(b);\ndv=delta<0.?a:b;\na=mod(base,r)-h;\nb=mod(base-h,r)-h;\nvec2 coord=length(a)<length(b)?a:b;\ncoord=(cv-dv)/res;\ndv*=3.;\nreturn vec4(dv,coord);\n}\nfloat quantize(float f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nvec2 quantize(vec2 f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nvec3 quantize(vec3 f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nfloat quantize(float f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec2 quantize(vec2 f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec3 quantize(vec3 f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec2 scaleUv(vec2 uv,float n){\nreturn((uv*2.-1.)*n)*0.5+0.5;\n}\nvec4 rgb2hsv(vec4 c){\nc=clamp(c,0.,1.);\nvec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);\nvec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));\nvec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));\nfloat d=q.x-min(q.w,q.y);\nfloat e=1.0e-10;\nreturn vec4(abs(q.z+(q.w-q.y)/(6.0*d+e)),d/(q.x+e),q.x,c.w);\n}\nvec4 hsv2rgb(vec4 c){\nc.yzw=clamp(c.yzw,0.,1.);\nvec4 K=vec4(1.,2./3.,1./3.,3.);\nvec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);\nreturn vec4(c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y),c.w);\n}\nvec3 rgb2hsv(vec3 c){\nreturn rgb2hsv(vec4(c,1)).xyz;\n}\nvec3 hsv2rgb(vec3 c){\nreturn hsv2rgb(vec4(c,1)).xyz;\n}\nvec4 alphamul(vec4 a,vec4 b){\nreturn vec4(b.a*b.rgb+a.a*a.rgb*(1.-b.a),b.a+a.a*(1.-b.a));\n}\nvec3 alphamul(vec3 a,vec3 b,float alpha){\nreturn alphamul(vec4(a,1),vec4(b,alpha)).rgb;\n}\nfloat istep(float n,float v){\nreturn 1.-step(n,v);\n}\nfloat idist(float n,float v){\nreturn clamp(smoothstep(-0.05,0.,v-n),0.,1.)*istep(n,v);\n}\nvec3 angle(vec2 cv,float i,float d){\nreturn cart2hex*(cv+rot(unit.xy,i/6.*tau)*d);\n}\nfloat rad(vec3 hex,float r){\nreturn amax(hex)-r;\n}\nvoid main(){\nvec3 c;\nc=unit.yyy;\nvec2 uv,cv,ov;\nuv=gl_FragCoord.xy/size;\nov=uv*2.-1.;\nvec3 hex,sex;\nfloat a,b,e,r,x,y,z,q,s,w,t,scale;\nov*=cover;\nov.y+=parallax.y*0.5;\nov+=dir/10.;\nscale=6.;\nov*=scale;\ncv=ov;\nq=2./amax(size)*scale*sr3 ;\nw=1./960.*scale*sr3;\nhex=cart2hex*cv;\na=0.;\nb=xsum(b,a);\nfor(int j=0; j<6; j++){\nfloat jj=float(j);\nt=fract(time+jj/6.);\ns=1./(1.+jj);\ncv=ov*s;\nfor(int i=0; i<6; i++){\nfloat ii=float(i);\nsex=angle(cv,ii,0.);\ne=rad(sex,2.*max(0.,t-0.5));\na=istep(0.,e);\ny=max(y,qw(abs(e),q*s,w*s));\nx+=a;\nb=xsum(b,a);\nsex=angle(cv,ii,2.*t);\ne=rad(sex,1.);\na=istep(0.,e);\ny=max(y,qw(abs(e),q*s,w*s));\nx+=a;\nb=xsum(b,a);\nsex=angle(cv,ii,2.+t);\ne=rad(sex,1.-t);\na=istep(0.,e);\ny=max(y,qw(abs(e),q*s,w*s));\nx+=a;\nb=xsum(b,a);\n}\n}\na=0.;\na=fract(a+quantize(fract(tatan(ov)+0.),6.));\na+=fract(x/36.);\nc=b*hsv2rgb(vec3(a,3./4.,5./6.));\nc-=y;\nfragColor=vec4(c,1);\n}"},147:n=>{n.exports="#version 300 es\nprecision highp float;\nout vec4 fragColor;\nin vec4 vColor;\nuniform float counter;\nuniform float duration;\nuniform float time;\nuniform float skipInterval;\nuniform float skipTime;\nuniform bool skip;\nuniform vec2 size;\nuniform vec2 cover;\nuniform vec2 contain;\nuniform vec2 lastSize;\nuniform vec2 parallax;\nuniform vec2 dir;\nuniform float zoom;\nuniform float resizeAt;\nuniform bool resize;\nuniform float cursorDownAt;\nuniform float cursorUpAt;\nuniform vec3 cursorHex;\nuniform vec3 cursorHexRounded;\nuniform vec2 cursorPos;\nuniform vec2 cursorLastPos;\nuniform vec2 cursorDownPos;\nuniform vec2 cursorUpPos;\nuniform bool cursorDown;\nuniform float cursorAngle;\nuniform bool shiftKey;\nuniform sampler2D inputTexture;\nuniform sampler2D lastTexture;\nvec3 unit=vec3(1,0,-1);\n#define pi 3.141592653589793\n#define tau 6.283185307179586\n#define sr2 1.4142135623730951\n#define sr3 1.7320508075688772\n#define ir3 0.5773502691896257"},937:n=>{n.exports="#version 300 es\nprecision highp float;\nout vec4 fragColor;\nin vec4 vColor;\nuniform float counter;\nuniform float duration;\nuniform float time;\nuniform float skipInterval;\nuniform float skipTime;\nuniform bool skip;\nuniform vec2 size;\nuniform vec2 cover;\nuniform vec2 contain;\nuniform vec2 lastSize;\nuniform vec2 parallax;\nuniform vec2 dir;\nuniform float zoom;\nuniform float resizeAt;\nuniform bool resize;\nuniform float cursorDownAt;\nuniform float cursorUpAt;\nuniform vec3 cursorHex;\nuniform vec3 cursorHexRounded;\nuniform vec2 cursorPos;\nuniform vec2 cursorLastPos;\nuniform vec2 cursorDownPos;\nuniform vec2 cursorUpPos;\nuniform bool cursorDown;\nuniform float cursorAngle;\nuniform bool shiftKey;\nuniform sampler2D inputTexture;\nuniform sampler2D lastTexture;\nvec3 unit=vec3(1,0,-1);\n#define pi 3.141592653589793\n#define tau 6.283185307179586\n#define sr2 1.4142135623730951\n#define sr3 1.7320508075688772\n#define ir3 0.5773502691896257\nmat2x3 cart2hex=mat2x3(vec3(-1,1,0),vec3(-1./sr3,-1./sr3,2./sr3));\nvec2 rot(vec2 p,float a){\nfloat ca=cos(a);\nfloat sa=sin(a);\nreturn mat2(ca,sa,-sa,ca)*p;\n}\nfloat amax(vec3 v){\nreturn max(max(abs(v.x),abs(v.y)),abs(v.z));\n}\nfloat xsum(float s,float q){\nreturn s+q-2.*s*q;\n}\nfloat qw(float n,float q,float w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nfloat istep(float n,float v){\nreturn 1.-step(n,v);\n}\nvec3 angle(vec2 cv,float i,float d){\nreturn cart2hex*(cv+rot(unit.xy,i/6.*tau)*d);\n}\nfloat rad(vec3 hex,float r){\nreturn amax(hex)-r;\n}\nvoid main(){\nvec3 c,d,cc,dd;\nc=unit.yyy;\nvec2 uv,cv,ov,vv,v;\nuv=gl_FragCoord.xy/size;\nov=uv*2.-1.;\nvec3 hex,gex,sex,pix,cel,samp,p[3],dist,bg;\nfloat a,b,b1,e,r,n,x,x1,x2,y,z,q,s,w,t,te,ts,scale;\nscale=3.;\ns=scale;\nov*=scale;\ncv=ov;\nq=1./1024.*scale*sr3*4./3.;\nw=1./1024.*scale*sr3*4./3.;\nt=smoothstep(0.,1.,time);\nts=clamp(t*2.,0.,1.);\nte=clamp(t*2.,1.,2.)-1.;\nhex=cart2hex*cv;;\ne=rad(hex,t*2.);\na=istep(0.,e);\ny=max(y,qw(abs(e),q*s,w*s));\nx+=a;\nb=xsum(b,a);\ne=rad(hex,ts);\na=istep(0.,e);\ny=max(y,qw(abs(e),q*s,w*s));\nx+=a;\nb=xsum(b,a);\nfor(int i=0; i<6; i++){\nfloat ii=float(i);\nsex=angle(cv,ii,1.+t);\ne=rad(sex,t);\na=istep(0.,e);\ny=max(y,qw(abs(e),q*s,w*s));\nx+=a;\nb=xsum(b,a);\n}\nc=vec3(xsum(0.,b));\nc=clamp(c,0.,1.);\nc=mix(unit.xxx*1./8.,unit.xxx*7./8.,c);\nb=b*(1.-step(3.,x));\nc=mix(unit.yyy,unit.xxx,b);\nfragColor=vec4(c,1);\n}"},18:n=>{n.exports="#version 300 es\nprecision highp float;\nout vec4 fragColor;\nuniform vec2 size;\nuniform sampler2D inputTexture;\nvoid main(){\nvec2 uv=gl_FragCoord.xy/size;\nfragColor=texture(inputTexture,uv);\n}"},566:n=>{n.exports="#version 300 es\nprecision highp float;\nin vec3 vertexPosition;\nvoid main(){\ngl_Position=vec4(vertexPosition,1);\n}"},439:n=>{n.exports="#version 300 es\nprecision highp float;\nout vec4 fragColor;\nin vec4 vColor;\nuniform float counter;\nuniform float duration;\nuniform float time;\nuniform float skipInterval;\nuniform float skipTime;\nuniform bool skip;\nuniform vec2 size;\nuniform vec2 cover;\nuniform vec2 contain;\nuniform vec2 lastSize;\nuniform vec2 parallax;\nuniform vec2 dir;\nuniform float zoom;\nuniform float resizeAt;\nuniform bool resize;\nuniform float cursorDownAt;\nuniform float cursorUpAt;\nuniform vec3 cursorHex;\nuniform vec3 cursorHexRounded;\nuniform vec2 cursorPos;\nuniform vec2 cursorLastPos;\nuniform vec2 cursorDownPos;\nuniform vec2 cursorUpPos;\nuniform bool cursorDown;\nuniform float cursorAngle;\nuniform bool shiftKey;\nuniform sampler2D inputTexture;\nuniform sampler2D lastTexture;\nvec3 unit=vec3(1,0,-1);\n#define pi 3.141592653589793\n#define tau 6.283185307179586\n#define sr2 1.4142135623730951\n#define sr3 1.7320508075688772\n#define ir3 0.5773502691896257\nmat3x2 hex2cart=mat3x2(vec2(0,0),vec2(1,0),vec2(0.5,sr3/2.));\nmat2x3 cart2hex=mat2x3(vec3(-1,1,0),vec3(-1./sr3,-1./sr3,2./sr3));\nmat3 hex2hex=mat3(1./3.,1./3.-ir3,1./3.+ir3,1./3.+ir3,1./3.,1./3.-ir3,1./3.-ir3,1./3.+ir3,1./3.);\nvec3 htWhite=1.-vec3(1./36.,1./24.,1./12.);\nbool isNan(float n){\nreturn!(n<=0.||0.<=n);\n}\nfloat amax(vec4 v){\nreturn max(max(max(abs(v.x),abs(v.y)),abs(v.z)),abs(v.w));\n}\nfloat amax(vec3 v){\nreturn max(max(abs(v.x),abs(v.y)),abs(v.z));\n}\nfloat amax(vec2 v){\nreturn max(abs(v.x),abs(v.y));\n}\nfloat amin(vec3 v){\nv=abs(v);\nreturn min(min(v.x,v.y),v.z);\n}\nfloat amin(vec2 v){\nv=abs(v);\nreturn min(v.x,v.y);\n}\nfloat osc(float n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nvec2 osc(vec2 n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nvec3 osc(vec3 n){\nn-=0.25;\nreturn sin(n*tau)*0.5+0.5;\n}\nfloat tsin(float n){\nreturn sin(n*tau);\n}\nfloat tcos(float n){\nreturn cos(n*tau);\n}\nvec2 tsin(vec2 n){\nreturn sin(n*tau);\n}\nvec2 tcos(vec2 n){\nreturn cos(n*tau);\n}\nvec3 tsin(vec3 n){\nreturn sin(n*tau);\n}\nvec3 tcos(vec3 n){\nreturn cos(n*tau);\n}\nfloat sum(vec2 p){\nreturn p.x+p.y;\n}\nfloat sum(vec3 p){\nreturn p.x+p.y+p.z;\n}\nfloat prod(vec2 p){\nreturn p.x*p.y;\n}\nfloat prod(vec3 p){\nreturn p.x*p.y*p.z;\n}\nfloat xsum(float s,float q){\nreturn s+q-2.*s*q;\n}\nvec2 xsum(vec2 s,vec2 q){\nreturn s+q-2.*s*q;\n}\nvec3 xsum(vec3 s,vec3 q){\nreturn s+q-2.*s*q;\n}\nvec2 rot(vec2 p,float a){\nfloat ca=cos(a);\nfloat sa=sin(a);\nreturn mat2(ca,sa,-sa,ca)*p;\n}\nvec3 rot(vec3 p,vec3 u,float a){\nfloat cosa=cos(a);\nfloat cosa1=1.-cosa;\nfloat sina=sin(a);\nmat3 m=mat3(cosa+u.x*u.x*cosa1,u.x*u.y*cosa1+u.z*sina,u.z*u.x*cosa1-u.y*sina,u.x*u.y*cosa1-u.z*sina,cosa+u.y*u.y*cosa1,u.z*u.y*cosa1+u.x*sina,u.x*u.z*cosa1+u.y*sina,u.y*u.z*cosa1-u.x*sina,cosa+u.z*u.z*cosa1);\nreturn m*p;\n}\nvec2 trot(vec2 p,float a){\nreturn rot(p,a*tau);\n}\nvec3 trot(vec3 p,vec3 u,float a){\nreturn rot(p,u,a*tau);\n}\nvec2 project(vec2 a,vec2 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec3 project(vec3 a,vec3 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec4 project(vec4 a,vec4 b){\nreturn dot(a,b)/dot(b,b)*b;\n}\nvec3 hexProject(vec3 p){\nvec3 n=project(p,unit.xxx);\nreturn p-n;\n}\nfloat tatan(vec2 v){\nfloat a=atan(v.y,v.x);\na+=pi;\na/=tau;\na=fract(a-0.25);\na=1.-a;\nreturn a;\n}\nvec4 dreflect(vec4 cv,vec4 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec3 dreflect(vec3 cv,vec3 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 dreflect(vec2 cv,vec2 n){\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 dreflect(vec2 cv,float a){\nvec2 n=vec2(cos(a),sin(a));\ncv-=n*min(0.,dot(cv,n))*2.;\nreturn cv;\n}\nvec2 treflect(vec2 cv,float a){\nreturn dreflect(cv,a*tau);\n}\nfloat qw(float n,float q,float w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nvec2 qw(vec2 n,float q,float w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nvec2 qw(vec2 n,float q,vec2 w){\nreturn smoothstep(w/2.+q/2.,w/2.-q/2.,abs(n));\n}\nfloat qs(float n,float q){\nreturn smoothstep(-q/2.,q/2.,n);\n}\nfloat qwp(float n,float q,float w){\nreturn qw(abs(fract(n+0.5)-0.5),q,w);\n}\nfloat openStep(float m,float n){\nreturn 1.-step(m,-n);\n}\nvec2 openStep(float m,vec2 n){\nreturn 1.-step(m,-n);\n}\nvec3 openStep(float m,vec3 n){\nreturn 1.-step(m,-n);\n}\nvec4 openStep(float m,vec4 n){\nreturn 1.-step(m,-n);\n}\nfloat linearStep(float a,float b,float n){\nreturn clamp((n-a)/(b-a),0.,1.);\n}\nfloat slength(vec2 u,vec2 v,vec2 p){\nvec2 w,x,z;\nw=u-v;\nx=p-v;\nz=project(x,w);\nz=clamp(z,min(w,unit.yy),max(w,unit.yy));\nreturn length(z-x);\n}\nvec3 roundCubic(vec3 p){\nvec3 r=round(p);\nvec3 d=abs(r-p);\nif(d.x>d.y&&d.x>d.z)r.x=-r.y-r.z;\nelse if(d.y>d.z)r.y=-r.x-r.z;\nelse\nr.z=-r.x-r.y;\nreturn r;\n}\nvec3 hex2grid(vec3 hex){\nvec3 p;\nhex=hex2hex*(hex/sr3);\np=roundCubic(hex);\np=hex-p;\np=-(hex2hex*(p*sr3));\nreturn p;\n}\nvec3 roundGrid(vec3 hex,float gridSize){\nvec3 p=hex2grid(hex);\np*=gridSize;\np=roundCubic(p);\nreturn p;\n}\nvec3 interpolatedCubic(vec3 p,out vec3 v[3]){\nvec3 q,d,r,fl,cl,alt;\nint i0,i1,i2;\nfl=floor(p);\ncl=ceil(p);\nr=round(p);\nd=abs(r-p);\nfor(int i=0; i<3; i++)alt[i]=r[i]==fl[i]?cl[i]:fl[i];\nif(d.x>d.y&&d.x>d.z)i0=0;\nelse if(d.y>d.z)i0=1;\nelse\ni0=2;\ni1=(i0+1)% 3;\ni2=(i0+2)% 3;\nr[i0]=-r[i1]-r[i2];\nv[0]=v[1]=v[2]=r;\nv[1][i1]=alt[i1];\nv[1][i0]=-v[1][i1]-v[1][i2];\nv[2][i2]=alt[i2];\nv[2][i0]=-v[2][i1]-v[2][i2];\nfor(int i=0; i<3; i++)q[i]=1.-amax(v[i]-p);\nq=q/sum(q);\nif(q.y<q.z){\nq.yz=q.zy;\nvec3 temp=v[1];\nv[1]=v[2];\nv[2]=temp;\n}\nreturn q;\n}\nvec4 hexbin(vec2 cv,float s){\nfloat res=s/3.;\nvec2 base,dv;\nbase=cv;\ncv*=res;\nvec2 r=vec2(1.,1./sr3);\nr=vec2(r.y,r.x);\nvec2 h=r*0.5;\nvec2 a=mod(cv,r)-h;\nvec2 b=mod(cv-h,r)-h;\nfloat delta=length(a)-length(b);\ndv=delta<0.?a:b;\na=mod(base,r)-h;\nb=mod(base-h,r)-h;\nvec2 coord=length(a)<length(b)?a:b;\ncoord=(cv-dv)/res;\ndv*=3.;\nreturn vec4(dv,coord);\n}\nfloat quantize(float f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nvec2 quantize(vec2 f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nvec3 quantize(vec3 f,float n,float ep){\nreturn floor(clamp(f*n,0.,n-ep))/n;\n}\nfloat quantize(float f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec2 quantize(vec2 f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec3 quantize(vec3 f,float n){\nreturn quantize(f,n,1./16384.);\n}\nvec2 scaleUv(vec2 uv,float n){\nreturn((uv*2.-1.)*n)*0.5+0.5;\n}\nvec4 rgb2hsv(vec4 c){\nc=clamp(c,0.,1.);\nvec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);\nvec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));\nvec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));\nfloat d=q.x-min(q.w,q.y);\nfloat e=1.0e-10;\nreturn vec4(abs(q.z+(q.w-q.y)/(6.0*d+e)),d/(q.x+e),q.x,c.w);\n}\nvec4 hsv2rgb(vec4 c){\nc.yzw=clamp(c.yzw,0.,1.);\nvec4 K=vec4(1.,2./3.,1./3.,3.);\nvec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);\nreturn vec4(c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y),c.w);\n}\nvec3 rgb2hsv(vec3 c){\nreturn rgb2hsv(vec4(c,1)).xyz;\n}\nvec3 hsv2rgb(vec3 c){\nreturn hsv2rgb(vec4(c,1)).xyz;\n}\nvec4 alphamul(vec4 a,vec4 b){\nreturn vec4(b.a*b.rgb+a.a*a.rgb*(1.-b.a),b.a+a.a*(1.-b.a));\n}\nvec3 alphamul(vec3 a,vec3 b,float alpha){\nreturn alphamul(vec4(a,1),vec4(b,alpha)).rgb;\n}\nuniform sampler2D mainTexture;\nuniform sampler2D videoTexture;\nuniform float startCounter;\nuniform float srcCounter;\nvoid main(){\nvec2 uv=gl_FragCoord.xy/size;\nvec2 cv=uv*2.-1.;\ncv*=cover;\nvec2 dv=cv*0.5+0.5;\nvec4 c=unit.yyyx;\nvec4 last;\nc=texture(videoTexture,dv);\nlast=texture(lastTexture,dv);\nc.a=clamp((counter-startCounter)/60.,0.,1.);\nif(counter-startCounter>60.)c=mix(last,c,clamp((counter-srcCounter)/60.,0.,1.));\nvec3 hex=cart2hex*dv;\nc=unit.xyyx;\nfragColor=c;\n}"},72:n=>{"use strict";var e=[];function t(n){for(var t=-1,r=0;r<e.length;r++)if(e[r].identifier===n){t=r;break}return t}function r(n,r){for(var a={},c=[],i=0;i<n.length;i++){var s=n[i],l=r.base?s[0]+r.base:s[0],v=a[l]||0,u="".concat(l," ").concat(v);a[l]=v+1;var f=t(u),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==f)e[f].references++,e[f].updater(p);else{var m=o(p,r);r.byIndex=i,e.splice(i,0,{identifier:u,updater:m,references:1})}c.push(u)}return c}function o(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,o){var a=r(n=n||[],o=o||{});return function(n){n=n||[];for(var c=0;c<a.length;c++){var i=t(a[c]);e[i].references--}for(var s=r(n,o),l=0;l<a.length;l++){var v=t(a[l]);0===e[v].references&&(e[v].updater(),e.splice(v,1))}a=s}}},659:n=>{"use strict";var e={};n.exports=function(n,t){var r=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},540:n=>{"use strict";n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},56:(n,e,t)=>{"use strict";n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},825:n=>{"use strict";n.exports=function(n){var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,o&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(r,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},113:n=>{"use strict";n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},884:(n,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>s});const{cos:r,sin:o,max:a,min:c}=Math,i=2*Math.PI/6,s={setup(n,e){n.fillStyle="#fff",n.globalCompositeOperation="xor",n.imageSmoothingQuality="high"},draw(n,e){n.save();const{size:t,time:r}=e,o=t[0]/6,a=(c=r)*c*(3-2*c);var c;n.clearRect(-t[0]/2,-t[1]/2,...t);for(let e,t,r=0;r<6;r++)e=l(r)*o*(1+a),t=v(r)*o*(1+a),u(n,e,t,o*a);r>=.5&&(u(n,0,0,o),u(n,0,0,o*a*2)),n.restore()}};function l(n){return r(n*i)}function v(n){return o(n*i)}function u(n,e,t,r){let o,a;n.beginPath(),o=e+r,a=t,n.moveTo(o,a);for(let c=1;c<6;c++)o=e+r*l(c),a=t+r*v(c),n.lineTo(o,a);n.closePath(),n.fill()}},797:(n,e,t)=>{var r={"./logo.js":884};function o(n){var e=a(n);return t(e)}function a(n){if(!t.o(r,n)){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}return r[n]}o.keys=function(){return Object.keys(r)},o.resolve=a,n.exports=o,o.id=797},930:(n,e,t)=>{var r={"./antialias.fs":376,"./ca-cursor.fs":909,"./ca-display.fs":305,"./ca-state.fs":110,"./ca-utils.fs":278,"./common.fs":63,"./flake.fs":494,"./header.fs":147,"./logo.fs":937,"./passthru.fs":18,"./vertex-position.vs":566,"./video.fs":439};function o(n){var e=a(n);return t(e)}function a(n){if(!t.o(r,n)){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}return r[n]}o.keys=function(){return Object.keys(r)},o.resolve=a,n.exports=o,o.id=930},236:(n,e,t)=>{"use strict";n.exports=t.p+"4474ab98e25b36528163.woff2?v=20210729"},149:(n,e,t)=>{"use strict";n.exports=t.p+"ee41bcfc89ac816bb512.woff2"},892:(n,e,t)=>{"use strict";n.exports=t.p+"176909ac69152e8a1b03.woff2"},935:(n,e,t)=>{"use strict";n.exports=t.p+"f1760c84334128130785.woff2"},631:(n,e,t)=>{"use strict";n.exports=t.p+"baa49fa07ef4be14f0c5.woff2"},608:(n,e,t)=>{"use strict";n.exports=t.p+"81245641337c21863635.woff2"}},e={};function t(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={id:r,exports:{}};return n[r](a,a.exports,t),a.exports}t.m=n,t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},(()=>{var n;t.g.importScripts&&(n=t.g.location+"");var e=t.g.document;if(!n&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(n=e.currentScript.src),!n)){var r=e.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!n||!/^http(s?):/.test(n));)n=r[o--].src}if(!n)throw new Error("Automatic publicPath is not supported in this browser");n=n.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=n})(),t.b=document.baseURI||self.location.href,t.nc=void 0,(()=>{"use strict";var n=t(72),e=t.n(n),r=t(825),o=t.n(r),a=t(659),c=t.n(a),i=t(56),s=t.n(i),l=t(540),v=t.n(l),u=t(113),f=t.n(u),p=t(550),m={};m.styleTagTransform=f(),m.setAttributes=s(),m.insert=c().bind(null,"head"),m.domAPI=o(),m.insertStyleElement=v(),e()(p.A,m),p.A&&p.A.locals&&p.A.locals;class h{constructor(){this.idx=0,this.fns=[]}newIdx(){return this.idx++}add(n,e=!1){const t=this.newIdx(),r=[t,n];return e?this.fns.unshift(r):this.fns.push(r),t}remove(n){const e=this.fns.length;return this.fns=this.fns.filter((([n,e])=>n!=n)),this.fns.length==e-1}call(...n){for(let e of this.fns)e[1](...n)}}class d{constructor(n,...e){this.parent=parent,this.hookList=n,this.hookMap={},this.defaultArgs=e;for(let e of n)this.hookMap[e]=new h}add(n,e){return this.hookMap[n]?.add(e)}addAll(n){Array.isArray(n)?n.forEach((([n,e])=>this.add(n,e))):Object.entries(n).forEach((([n,e])=>{"function"==typeof e?this.add(n,e):this.addAll(e.map((e=>[n,e])))}))}remove(n){return this.hookMap[n]?.remove(n)}call(n,...e){return this.hookMap[n]?.call(...this.defaultArgs,...e)}}class x{constructor(n,e,t,r){this.page=n,this.name=e,this.canvas=t,this.config=r,this.counter=0,this.interval=this.config.interval||x.DEFAULT_INTERVAL,this.minPixelRatio=this.config.minPixelRatio||1,this.hidden=!1,this.config.hooks=this.config.hooks||{},this.hooks=new d(["beforeRun","afterRun","onReset","onStart","onStop","onPointer","onKey","onResize","onScroll"],this),this.hooks.addAll(this.config.hooks),this.config.size&&!isNaN(this.config.size)&&(this.config.size=[this.config.size,this.config.size]),this.setSize()}initialize(){}clear(){}setup(){}setSize(){this.size=this.config.size?.slice()||[this.w,this.h]}setHidden(n){this.hidden=n,this.canvas.classList.toggle("hidden",n)}hide(){this.setHidden(!0),this.stop()}reset(){this.counter=0,this.playing||this.run(),this.hooks.call("onReset")}run(){}loop(){if(!this.playing)return;if(this.config.stopAt&&this.config.stopAt<=this.counter)return;const n=Date.now();n>=this.last+this.interval&&(this.last=n,this.run()),requestAnimationFrame((()=>this.loop()))}start(n=!0){this.playing=!0,this.last=Date.now(),this.setup(),n&&this.reset(),this.hooks.call("onStart"),requestAnimationFrame((()=>this.loop()))}stop(){this.playing=!1,this.hooks.call("onStop")}toggle(){this.playing?this.stop():this.start(!1)}handleResize(n){const e=Math.max(window.devicePixelRatio,this.minPixelRatio),[t,r]=[this.canvas.offsetWidth,this.canvas.offsetHeight],[o,a]=[t,r].map((n=>Math.round(n*e)));this.dw=t,this.dh=r,this.w=o,this.h=a,this.contain=o>a?[o/a,1]:[1,a/o],this.cover=o>a?[1,a/o]:[o/a,1],this.canvas.width=o,this.canvas.height=a,this.setSize(),this.hooks.call("onResize")}handleScroll(n){this.hooks.call("onScroll")}}x.DEFAULT_INTERVAL=33;const b=function(n){const e=n.keys().map((e=>{const t=e.match(/([\w\-]+)\.js/)?.[1];return[t,n(e).default]}));return Object.fromEntries(e)}(t(797)),g={counter:0,time:0,duration:360,size:[0,0]},y={resetTexture(n,e,t={}){const r=t.w||1,o=t.h||1;n.bindTexture(n.TEXTURE_2D,e),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r,o,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.MIRRORED_REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.MIRRORED_REPEAT),t.flip&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0)}},w=function(n){const e=n.keys().map((e=>{const t=e.match(/([\w\-]+)\.(fs|vs)$/)?.[1];return[t,n(e)]}));return Object.fromEntries(e)}(t(930));class z{static build(n,e){return e.map((e=>{const[t,r]=e.slice(0,2).map((n=>w[n])),o=e[2];return new z(n,t,r,o)}))}constructor(n,e,t,r={}){this.SHADERS=w,this.player=n,this.gl=n.gl,this.vertText=e,this.fragText=t,this.buildConfig(r);const o=this.gl;this.vertShader=o.createShader(o.VERTEX_SHADER),this.fragShader=o.createShader(o.FRAGMENT_SHADER),o.shaderSource(this.vertShader,e),o.shaderSource(this.fragShader,t),o.compileShader(this.vertShader),o.compileShader(this.fragShader),o.getShaderParameter(this.vertShader,o.COMPILE_STATUS)||console.error(o.getShaderInfoLog(this.vertShader)),o.getShaderParameter(this.fragShader,o.COMPILE_STATUS)||console.error(o.getShaderInfoLog(this.fragShader)),this.program=o.createProgram(),o.attachShader(this.program,this.vertShader),o.attachShader(this.program,this.fragShader),o.linkProgram(this.program),this.textures=[],this.framebuffers=[],this.numTextureBuffers=this.stateful?2:1;for(let n=0;n<this.numTextureBuffers;n++){const n=o.createTexture(),e=o.createFramebuffer();this.textures.push(n),this.framebuffers.push(e),y.resetTexture(o,n)}this.cover=this.contain=this.aspect=null,this.handleResize()}buildConfig(n){if(n.size){const e=Array.isArray(n.size)?n.size:[n.size,n.size];this.persistent=!0,this.size=e}this.stateful=!!n.state,this.uniforms=n.uniforms||{}}getTexture(n){return this.textures[n%this.numTextureBuffers]}getFramebuffer(n){return this.framebuffers[n%this.numTextureBuffers]}setUniforms(n){const{gl:e,program:t}=this;e.useProgram(t),n=Object.assign({},n,this.uniforms);for(let[r,o]of Object.entries(n)){if(null==o)continue;"function"==typeof o&&(o=o(n));const a=e.getUniformLocation(t,r);o.length||(o=[o]);const c="boolean"==typeof o[0]?"i":"f";e["uniform%1%2v".replace("%1",o.length).replace("%2",c)](a,o)}}setTextures(n){const{gl:e}=this;e.useProgram(this.program);const t=Object.entries(n);let r=0;for(let[n,o]of t){const t=Array.isArray(o)?o:[o],a=e.getUniformLocation(this.program,n),c=[];for(const n of t){const t="TEXTURE%".replace("%",r);e.activeTexture(e[t]),e.bindTexture(e.TEXTURE_2D,n),c.push(r),r++}e.uniform1iv(a,c)}}handleResize(n){const{gl:e}=this,[t,r]=this.size||this.player.size;if(this.contain=t>r?[t/r,1]:[1,r/t],this.cover=t>r?[1,r/t]:[t/r,1],!this.persistent||!n)for(let n=0;n<this.numTextureBuffers;n++){const[o,a]=[this.textures[n],this.framebuffers[n]];e.bindFramebuffer(e.FRAMEBUFFER,a),y.resetTexture(e,o,{w:t,h:r}),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0)}}}const q={duration:720,counter:0,time:0,skipInterval:30,skipTime:0,skip:!1,size:[0,0],cover:[1,1],contain:[1,1],lastSize:[0,0],parallax:[0,0],dir:[0,0],zoom:1,resize:!1,resizeAt:0,cursorDownAt:0,cursorUpAt:0,cursorHex:[0,0,0],cursorHexRounded:[0,0,0],cursorPos:[0,0],cursorLastPos:[0,0],cursorDownPos:[0,0],cursorUpPos:[0,0],cursorDown:!1,cursorAngle:0,shiftKey:!1,keyW:!1,keyA:!1,keyS:!1,keyD:!1};class k{constructor(n={}){let e={canvas:n.canvas||document.createElement("canvas")};Object.assign(this,e,n)}get textureSrc(){return this.canvas}}class S extends k{constructor(n={}){super(n),Object.assign(this,{size:64,channels:3,spots:36,spotLength:8},n),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.setSize()}setSize(n=this.size){const{canvas:e,ctx:t}=this;n=Array.isArray(n)?n:[n,n],this.size=n,[e.width,e.height]=n,this.getNewData()}clear(){this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,...this.size),this.getNewData()}getNewData(){this.data=this.ctx.getImageData(0,0,...this.size)}getIndex(n,e,t){const[r,o]=this.size;return(n%=r)*r*4+4*(e%=o)+t}set(n,e,t,r){const o=this.getIndex(n,e,t);this.data.data[o]=r}get(n,e,t){const r=this.getIndex(n,e,t);return this.data.data[r]}setNoise(n="squiggle"){"squiggle"==n&&this.setSquiggleNoise()}setSquiggleNoise(){const{ctx:n,size:e,channels:t,spots:r,spotLength:o}=this,{random:a,floor:c,sign:i}=Math,[s,l]=this.size,v=[[1,0],[0,1],[-1,0],[0,-1]];this.clear();for(let n=0;n<t;n++)for(let e=0;e<r;e++){let e=c(a()*s),t=c(a()*l);this.set(e,t,n,255);for(let r=0;r<o-1;r++){const r=c(4*a());let o,i;[o,i]=v[r];for(let r=0;r<16&&255==this.get(e+o,t+i,n);r++)o*=2,i*=2;e+=o,t+=i,this.set(e,t,n,255)}}n.putImageData(this.data,0,0)}}const T={cart2hex:R,roundHex:P,cart2hex:R,hex2cart:function(n){return[n[1]+.5*n[2],A/2*n[2]]},hex2hex:j,setCursor:function(n,e){const{uniforms:t}=n,r=D(n,e);t.cursorLastPos=t.cursorPos,t.cursorPos=r,"pointerdown"==e.type?(t.cursorDown=!0,t.cursorDownAt=this.counter,t.cursorDownPos=r.slice()):"pointerup"!=e.type&&"pointerout"!=e.type&&"pointercancel"!=e.type||(t.cursorDown=!1,t.cursorUpAt=this.counter,t.cursorUpPos=r.slice()),t.cursorAngle=Math.atan2(r[1],r[0])},setCursorHex:function(n,e){const{uniforms:t}=n,{pan:r,zoom:o,gridSize:a}=t,c=r(t);let i,s,l,v=D(n,e);v=v.map(((e,t)=>e*n.cover[t])),v=v.map(((n,e)=>n*o+c[e])),i=R(v),t.cursorHex=P(i.map((n=>n*a))),i=j(i).map((n=>n/A)),s=P(i),l=i.map(((n,e)=>n-s[e])),i=j(l).map((n=>-n*A)),t.cursorHexRounded=P(i.map((n=>n*a)))},handleKey:function(n,e){const{config:t,uniforms:r}=n,o=e.key.toUpperCase(),a=`key${o}`;if(r.shiftKey=e.shiftKey,!"WASD".includes(o)||e.shiftKey||e.ctrlKey)"keydown"==e.type&&(","==o?r.zoom*=12/11:"."==o?r.zoom*=11/12:e.repeat||("R"==o?n.reset():"T"==o?n.toggle():"G"==o?n.playing?n.stop():n.run():"H"==o&&(r.dir=[0,0],r.zoom=t.uniforms?.zoom||1)));else{const n={W:[0,1],A:[-1,0],S:[0,-1],D:[1,0]}[o];"keydown"==e.type?(r[a]=!0,r.dir=r.dir.map(((e,t)=>e+n[t]))):"keyup"==e.type&&(r[a]=!1,r.dir=r.dir.map(((e,t)=>e+n[t])))}},extractCells:function(n,e){}},A=3**.5,C=1/A,E=[1/3,1/3+C,1/3-C,1/3-C,1/3,1/3+C,1/3+C,1/3-C,1/3];function P(n){const{abs:e,round:t}=Math,r=n.map((n=>t(n))),o=n.map(((n,t)=>e(n-r[t])));return o[0]>o[1]&&o[0]>o[2]?r[0]=-r[1]-r[2]:o[1]>o[2]?r[1]=-r[0]-r[2]:r[2]=-r[0]-r[1],r}function R(n){return[-n[0]-1/A*n[1],n[0]-1/A*n[1],2/A*n[1]]}function j(n){const[e,t,r]=n,o=E;return[e*o[0]+t*o[1]+r*o[2],e*o[3]+t*o[4]+r*o[5],e*o[6]+t*o[7]+r*o[8]]}function D(n,e){return[e.clientX/n.dw*2-1,e.clientY/n.dh*-2+1]}const L={main:{type:"gl",customInput:{noiseTexture:n=>new S({size:64,channels:2})},hooks:{afterRun:n=>n.page.updateCounter(n.counter),onReset:n=>{n.page.updateCounter(n.counter),n.customInput.noiseTexture.setNoise()},onPointer:[(n,e)=>T.setCursor(n,e),(n,e)=>T.setCursorHex(n,e)],onKey:(n,e)=>T.handleKey(n,e),onScroll:n=>n.uniforms.parallax[1]=2*n.page.scrollPos-1||0},uniforms:{autoscroll:[0,1],gridSize:15,zoom:2/3,pan:n=>{const{dir:e,gridSize:t,autoscroll:r,counter:o,duration:a,parallax:c}=n;return e.map(((n,e)=>n/t/2+r[e]*o/a/2+c[e]/2))}},shaders:[["vertex-position","ca-cursor",{size:64,state:!0}],["vertex-position","ca-state",{size:64,state:!0}],["vertex-position","ca-display"]]},logo:{type:"2d",stopAt:60,params:{duration:60},scripts:["logo"]}};function I(n,e,t){const r=L[e];return new(0,I.PLAYER_MAP[r.type])(n,e,t,r)}I.PLAYER_MAP={"2d":class extends x{constructor(n,e,t,r){super(n,e,t,r),this.transferCanvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.tctx=this.transferCanvas.getContext("2d"),this.pixelRatio=this.config.pixelRatio||2,this.scripts=this.config.scripts.map((n=>b[n])),this.params=Object.assign({},g,this.config.params),this.setParams(),this.handleResize()}setParams(){const{params:n}=this;n.counter=this.counter,n.time=this.counter/n.duration}reset(){super.reset(),this.clear()}clear(){this.ctx.clearRect(0,0,...this.size),this.tctx.clearRect(0,0,...this.tsize)}setup(){this.scripts.forEach((n=>n.setup(this.tctx,this.params)))}run(){this.setParams(),this.draw(),this.hidden&&this.setHidden(!1),this.counter++}draw(){this.scripts.forEach((n=>n.draw(this.tctx,this.params))),this.transfer()}transfer(){this.ctx.clearRect(0,0,...this.size),this.ctx.drawImage(this.transferCanvas,0,0,...this.size)}handleResize(){super.handleResize();const{params:n,tctx:e,pixelRatio:t,transferCanvas:r,w:o,h:a}=this;this.tsize=[o*t,a*t],[this.tw,this.th]=this.tsize,n.size=this.tsize.slice(),r.width=this.tw,r.height=this.th,e.setTransform(1,0,0,1,0,0),e.translate(this.tw/2,this.th/2)}},gl:class extends x{constructor(n,e,t,r){super(n,e,t,r),this.gl=t.getContext("webgl2"),this.shaderDefs=this.config.shaders,this.uniforms=Object.assign({},q,this.config.uniforms),this.shaderPrograms=[],this.customInputKeys=[],this.customInput={},this.customTextures={},this.config.size&&!isNaN(this.config.size)&&(this.config.size=[this.config.size,this.config.size]),this.shaderPrograms=z.build(this,this.shaderDefs),this.handleResize(),this.handleScroll(),this.clear()}initialize(){const{customInput:n,customTextures:e,gl:t}=this;this.config.customInput&&(this.customInputKeys=Object.keys(this.config.customInput),this.customInputKeys.forEach((r=>{const o=(0,this.config.customInput[r])(this);n[r]=o;const a=t.createTexture();e[r]=a;const[c,i]=[o.canvas.width,o.canvas.height];y.resetTexture(t,a,{flip:o.flip})})))}clear(){this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}setup(){const{gl:n}=this,e=new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),t=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,t),n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW);for(const e of this.shaderPrograms){const r=n.getAttribLocation(e.program,"vertexPosition");n.enableVertexAttribArray(r),n.bindBuffer(n.ARRAY_BUFFER,t),n.vertexAttribPointer(r,3,n.FLOAT,!1,0,0)}}reset(){super.reset(),this.uniforms.resize=!0,this.uniforms.dir=[0,0]}run(){this.hooks.call("beforeRun");const{gl:n,shaderPrograms:e,uniforms:t}=this,r=this.counter%2,o=(r+1)%2,a=this.shaderPrograms.length;t.counter=this.counter,t.time=t.counter%t.duration/t.duration,t.skipTime=t.counter%t.skipInterval/t.skipInterval,t.skip=0==t.skipTime,t.clock=Date.now()%1e3/1e3,this.customInputKeys.forEach((e=>{const t=this.customTextures[e],r=(this.customInput[e].ctx,this.customInput[e].textureSrc);n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r.width,r.height,0,n.RGBA,n.UNSIGNED_BYTE,r)}));const c=this.shaderPrograms.map((n=>n.getTexture(o)));for(let i=0;i<a;i++){const s=(i+a-1)%a,l=e[i];t.lastSize=t.size.slice(),t.size=l.size||this.size,t.cover=l.cover,t.contain=l.contain,t.aspect=l.aspect;const v=l.getTexture(o);let u=e[s].getTexture(r);a>1&&0==i&&(u=e[a-2].textures[o]),l.setTextures({inputTexture:u,lastTexture:v,textureArray:c,...this.customTextures}),l.setUniforms(t);const f=i<a-1?l.getFramebuffer(r):null;n.viewport(0,0,...t.size),n.useProgram(l.program),n.bindFramebuffer(n.FRAMEBUFFER,f),n.drawArrays(n.TRIANGLE_STRIP,0,4)}this.hidden&&this.setHidden(!1),this.hooks.call("afterRun"),t.resize=!1,this.counter++}handleResize(n){super.handleResize(n),this.shaderPrograms.forEach((e=>e.handleResize(n)))}handleScroll(n){super.handleScroll(n),this.uniforms.resize=!0,this.uniforms.resizeAt=!0,this.gl.viewport(0,0,this.w,this.h),this.shaderPrograms.forEach((e=>e.handleResize(n)))}}};const U={productionHost:"hexagontruth.com",envs:{production:{mediaBaseUrl:"https://media.hexagontruth.com/"},development:{mediaBaseUrl:"http://localhost:8081/"}}},K={cryptovoxels:"https://www.cryptovoxels.com/play?coords=W@375.5W,603S,0.5U",discord:"https://discord.gg/t6hrz7S",opensea:"https://opensea.io/hexagontruth",rarible:"https://rarible.com/hexagontruth",showtime:"https://tryshowtime.com/hexagontruth",superrare:"https://superrare.co/hexagontruth",youtube:"https://www.youtube.com/channel/UCf-ml0bmw7OJZHZCIB0cx3g",cv:"https://www.cryptovoxels.com/play?coords=W@375.5W,603S,0.5U",voxels:"https://www.cryptovoxels.com/play?coords=W@375.5W,603S,0.5U",sr:"https://superrare.co/hexagontruth",yt:"https://www.youtube.com/channel/UCf-ml0bmw7OJZHZCIB0cx3g"},H=[{name:"The Descent of Form",link:"https://opensea.io/assets/ethereum/0x3b3ee1931dc30c1957379fac9aba94d1c48a5405/95416",src:"videos/descent-of-form.mp4"},{name:"Sun Flake",link:"https://opensea.io/assets/ethereum/0xb932a70a57673d89f4acffbe830e8ed7f75fb9e0/32486",src:"videos/sun-flake.mp4"},{name:"Emptiness",link:"https://opensea.io/assets/ethereum/0xb932a70a57673d89f4acffbe830e8ed7f75fb9e0/26077",src:"videos/emptiness.mp4"},{name:"Vacuum Decay",link:"https://opensea.io/assets/ethereum/0xb932a70a57673d89f4acffbe830e8ed7f75fb9e0/21970",src:"videos/vacuum-decay.mp4"},{name:"Gyroid Cycle",link:"https://opensea.io/assets/ethereum/0xb932a70a57673d89f4acffbe830e8ed7f75fb9e0/18123",src:"videos/gyroid-cycle.mp4"},{name:"Return of the Monad",link:"https://opensea.io/assets/ethereum/0xb932a70a57673d89f4acffbe830e8ed7f75fb9e0/12665",src:"videos/return-monad.mp4"},{name:"The Lenticular Identity",link:"https://opensea.io/assets/ethereum/0xb932a70a57673d89f4acffbe830e8ed7f75fb9e0/13799",src:"videos/lenticular-identity.mp4"},{name:"Machine Temple Dyad",link:"https://opensea.io/assets/ethereum/0xd07dc4262bcdbf85190c01c996b4c06a461d2430/23237",src:"videos/machine-temple-dyad.mp4"},{name:"Diurn",link:"https://opensea.io/assets/ethereum/0xb932a70a57673d89f4acffbe830e8ed7f75fb9e0/16357",src:"videos/diurn.mp4"},{name:"Flake Concept 1:26",link:"https://opensea.io/assets/ethereum/0xd07dc4262bcdbf85190c01c996b4c06a461d2430/11322",src:"videos/flake-concept-1-26.mp4"},{name:"Seed Cube Concept 5",link:"https://opensea.io/assets/ethereum/0xd07dc4262bcdbf85190c01c996b4c06a461d2430/10022",src:"videos/seed-cube-concept-5.mp4"},{name:"Triangle Study 1",link:"https://opensea.io/assets/ethereum/0xb932a70a57673d89f4acffbe830e8ed7f75fb9e0/32288",src:"videos/triangle-study-1.mp4"},{name:"Difference Engine",link:"https://opensea.io/assets/ethereum/0xb932a70a57673d89f4acffbe830e8ed7f75fb9e0/17442",src:"videos/difference-engine.mp4"},{name:"Plerome",link:"https://opensea.io/assets/ethereum/0xb932a70a57673d89f4acffbe830e8ed7f75fb9e0/16516",src:"videos/plerome.mp4"}];window.page=new class{constructor(){this.loaded=!1,this.scrollTabs=[],this.scrollMap={},this.letterTimer=null,this.letterInterval=150,this.titleHidden=!1,this.counter=0,this.setEnv(),this.setArgs(),window.addEventListener("load",(n=>this.onLoad(n))),setTimeout((()=>this.onLoad()),1e3)}setArgs(){let n=(window.location.search.replace("?","")||"").split("&").filter((n=>""!=n)).map((n=>n.split("=")));this.args={};for(let[e,t]of n)this.args[e]=void 0===t||t;Object.entries(K).forEach((([n,e])=>{this.args[n]&&(window.location.href=e)}))}setEnv(){this.isProduction=window.location.host==U.productionHost,this.env=this.isProduction?"production":"development",this.mediaBaseUrl=U.envs[this.env].mediaBaseUrl}onLoad(n){this.loaded||(this.loaded=!0,this.html=document.documentElement,this.body=document.body,this.page=document.querySelector("#page"),this.header=document.querySelector("#header"),this.footer=document.querySelector("#footer"),this.isProduction&&this.onProd(),this.players={},document.querySelectorAll(".player").forEach((n=>{const e=n.getAttribute("data-program"),t=n.getAttribute("data-controls"),r=(document.querySelector(t),I(this,e,n));this.players[e]=r})),Object.values(this.players).forEach((n=>n.initialize())),this.hooks=new d(["onSnap","onScroll"],this),this.hooks.add("onSnap",(()=>{"art"==this.scrollId?this.startVideo(0):this.hideVideo()})),this.initializeVideo(),this.controls=document.querySelector("#controls"),this.counterDisplay=document.querySelector("#counter"),this.title=document.querySelector("h1"),this.letters=document.querySelectorAll("h1 span"),this.hidden=!1,this.scrollPos=0,this.lastPointer=0,this.page.addEventListener("pointercancel",(n=>this.handlePointer(n))),this.page.addEventListener("pointerdown",(n=>this.handlePointer(n))),this.page.addEventListener("pointermove",(n=>this.handlePointer(n))),this.page.addEventListener("pointerout",(n=>this.handlePointer(n))),this.page.addEventListener("pointerup",(n=>this.handlePointer(n))),window.addEventListener("keydown",(n=>this.handleKey(n))),window.addEventListener("keyup",(n=>this.handleKey(n))),window.addEventListener("resize",(n=>this.handleResize(n))),window.addEventListener("scroll",(n=>this.handleScroll(n))),window.chrome&&!navigator.maxTouchPoints&&window.addEventListener("wheel",(n=>this.onWheel(n)),{passive:!1}),this.setScrollBlocks(),this.setAnchor(),this.handleScroll(),this.args.hide&&this.toggleHidden(),this.args.counter&&this.toggleControls(),document.body.style.transition="opacity 1000ms",document.body.style.opacity=1,this.players.main.start())}initializeVideo(){this.videoDefs=H.slice(),this.videos=Array(this.videoDefs.length).fill(null),this.videoContainer=document.querySelector("#video-container"),this.videoLink=Array.from(document.querySelectorAll(".video-link")),this.videoPrev=Array.from(document.querySelectorAll(".video-prev")),this.videoNext=Array.from(document.querySelectorAll(".video-next")),this.videoPrev.forEach((n=>n.addEventListener("click",(()=>this.startVideo(-1))))),this.videoNext.forEach((n=>n.addEventListener("click",(()=>this.startVideo(1))))),this.videoIdx=0,this.lastVideo=null,this.curVideo=null}createVideo(n){const e=document.createElement("video");return e.muted=!0,e.loop=!0,e.src=this.mediaBaseUrl+n,e}hideVideo(){this.videoContainer.classList.add("hidden"),this.curVideo?.pause()}startVideo(n){this.videoIdx=(this.videoIdx+n+this.videoDefs.length)%this.videoDefs.length,this.loadVideo(this.videoIdx)}loadVideo(n){const e=this.videoDefs[n];let t=this.videos[n];t?this.swapVideo(t,e):(t=this.createVideo(e.src),this.videos[n]=t,t.oncanplaythrough=()=>this.swapVideo(t,e))}swapVideo(n,e){this.lastVideo?.remove();const t=this.curVideo;this.lastVideo=t,t?.pause(),this.curVideo=n,this.videoContainer.appendChild(this.curVideo),this.curVideo.play(),requestAnimationFrame((()=>{t?.classList.remove("active"),n.classList.add("active"),this.videoContainer.classList.remove("hidden")})),this.videoLink.forEach((n=>{n.href=e.link,this.videoContainer!=n&&(n.innerHTML=e.name)}))}updateCounter(n){this.counter=n||this.counter;const e=("00000"+this.counter).slice(-6);this.counterDisplay.innerHTML=e}hideTitle(){this.titleHidden=!0,this.players.logo.hide(),this.letterTimer&&clearTimeout(this.letterTimer),this.letters.forEach((n=>n.classList.add("hidden"))),this.title.className="t0",this.letterIdx=0}animateTitle(){this.hideTitle(),this.players.logo.start(),this.titleHidden=!1,this.setTitleTimer()}setTitleTimer(){this.letterTimer&&clearTimeout(this.letterTimer),this.letterTimer=setTimeout((()=>this.animateTitleStep()),this.letterInterval)}animateTitleStep(){this.title.className=`t${this.letterIdx+1}`,this.letters[this.letterIdx].classList.remove("hidden"),++this.letterIdx<this.letters.length?this.setTitleTimer():this.title.className=""}setAnchor(){let[n,e]=window.location.href.split("#"),t=this.scrollMap[e];e&&t&&window.scrollTo(0,this.scrollBlocks[t].offsetTop)}createElement(n="div",e,t){let r=document.createElement(n);return r.className=e||"",t&&t.appendChild(r),r}setScrollBlocks(n){const e=this.createElement("div","scroll-tab");if(this.createElement("div","scroll-tab-inner",e),this.scrollTabGroup=document.querySelector(".scroll-tabs"),this.scrollBlocks=Array.from(document.querySelectorAll(".scroll-block")),this.hasScroll)for(let n=0;n<this.scrollBlocks.length;n++){const t=this.scrollBlocks[n].id,r=e.cloneNode(!0);this.scrollTabGroup.appendChild(r),this.scrollTabs.push(r),this.scrollMap[t]=n,r.addEventListener("click",(()=>this.scrollTo(n)))}}scrollTo(n){location.hash=this.scrollBlocks?.[n].id||"",window.scrollTo(0,this.scrollBlocks[n].offsetTop)}getScrollId(){const n=Object.entries(this.scrollMap).find((([n,e])=>e==this.snap));return n?.[0]||null}setSnap(n){this.snap=n,this.scrollId=this.getScrollId();let e=this.getSnapObject();e[window.location.pathname]=n,sessionStorage.setItem("snap",JSON.stringify(e)),this.hooks.call("onSnap")}getSnap(){let n=this.getSnapObject();return this.snap=parseInt(n[window.location.pathname])||0,this.snap}getSnapObject(){let n=sessionStorage.getItem("snap");return n?JSON.parse(n):{}}onProd(){this.gaScript=document.createElement("script"),this.body.appendChild(this.gaScript),this.gaScript.onload=()=>{function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-MC0FHVSG9W"),this.gtag=n},this.gaScript.src="https://www.googletagmanager.com/gtag/js?id=G-MC0FHVSG9W"}toggleControls(n=void 0){this.controls?.classList.toggle("hidden",n)}toggleHidden(n=!this.hidden){this.hidden=n,this.html.classList.toggle("fullscreen",this.hidden),document.querySelectorAll(".scroll-block, .nav-block").forEach((n=>{n.classList.toggle("hidden",this.hidden)}))}eq(n,e=5){return Math.abs(window.scrollY-n)<e}get hasScroll(){return!!this.scrollBlocks?.length}handleKey(n){const e=Number.parseInt(n.key);if("keydown"==n.type)if(e&&e<=this.scrollBlocks.length)this.scrollTo(e-1);else if("c"==n.key)this.toggleControls();else if("Escape"==n.key)this.toggleHidden();else if(("ArrowLeft"==n.key||"ArrowRight"==n.key)&&"art"==this.scrollId){const e="ArrowLeft"==n.key?-1:1;this.startVideo(e)}this.players.main?.hooks.call("onKey",n)}handlePointer(n){if("pointerdown"==n.type){const{abs:e,min:t}=Math,[r,o]=[window.innerWidth,window.innerHeight],a=this.lastPointer,c=n.timeStamp;this.lastPointer=c,(t(e(r/2-e(n.pageX%r-r/2))/window.innerWidth,e(o/2-e(n.pageY%o-o/2))/window.innerHeight)<.1||"mouse"==n.pointerType)&&c-a<200&&this.toggleHidden()}this.players.main?.hooks.call("onPointer",n)}handleResize(n){0==this.snap&&this.animateTitle(),Object.values(this.players).forEach((e=>e.handleResize(n)))}handleScroll(n){if(!this.hasScroll)return;this.scrollTabs.forEach((n=>n.classList.remove("active")));let e=this.scrollBlocks.findIndex((n=>this.eq(n.offsetTop,1)));-1!=e&&(this.setSnap(e),this.scrollTabs[e].classList.add("active")),Math.ceil(window.scrollY)>=window.innerHeight?this.titleHidden||this.hideTitle():this.eq(0,1)&&this.animateTitle(),this.scrollPos=window.scrollY/(document.documentElement.scrollHeight-window.innerHeight),this.hooks.call("onScroll"),Object.values(this.players).forEach((e=>e.handleScroll(n)))}onWheel(n){}},console.log("\n============================================================\nHexagonal greetings, friend.\n\nThis site doesn't do much, but some rudimentary controls for anyone interested:\n\n- Click: Place cells\n\n- Shift+Click: Remove cells\n\n- <R>: Restart from new random seed\n\n- Shift+<R>: Clear grid (useful for manual placement)\n\n- <H>: Reset pan and zoom transforms\n\n- <T>: Pause/resume\n\n- <G>: Step/pause\n\n- <WASD>: Pan\n\n- <,>: Zoom out\n\n- <.>: Zoom in\n\n- <C>: Toggle counter\n\n- <Esc>: Hide page content\n\nVarious uniforms can be set manually on `page.players.main.uniforms`.\n\n============================================================\n".trim())})()})();